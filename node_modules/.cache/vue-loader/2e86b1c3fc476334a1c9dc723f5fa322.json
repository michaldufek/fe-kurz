{"remainingRequest":"/home/dufek/Documents/gitlab/frs-apps/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dufek/Documents/gitlab/frs-apps/src/custom/apps/IBConnection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dufek/Documents/gitlab/frs-apps/src/custom/apps/IBConnection.vue","mtime":1587030366014},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBTbGlkZVlVcFRyYW5zaXRpb24gfSBmcm9tICJ2dWUyLXRyYW5zaXRpb25zIjsNCmltcG9ydCBEdWFsUmluZ0xvYWRlciBmcm9tICdAYml0L2pvc2hrLnZ1ZS1zcGlubmVycy1jc3MuZHVhbC1yaW5nLWxvYWRlcic7DQppbXBvcnQgJy4uL2Fzc2V0cy9jc3Mvc2hha2UuY3NzJw0KDQppbXBvcnQgY29uc3RhbnRzIGZyb20gJ0AvY3VzdG9tL2Fzc2V0cy9qcy9jb25zdGFudHMnDQppbXBvcnQgaGVscGVyIGZyb20gJ0AvY3VzdG9tL2Fzc2V0cy9qcy9oZWxwZXInDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgU2xpZGVZVXBUcmFuc2l0aW9uLA0KICAgICAgICBEdWFsUmluZ0xvYWRlcg0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7IA0KICAgICAgICBzdG9yZUtleTogY29uc3RhbnRzLnRyYW5zbGF0aW9uS2V5cy5JQkxvZ2luLA0KICAgICAgICBHV0xvZ3NUaW1lcjogbnVsbCwNCiAgICAgICAgbG9nczogW10sDQoNCiAgICAgICAgbG9hZGluZzogZmFsc2UsICAgICAgICANCiAgICAgICAgY29ubmVjdGVkOiBmYWxzZSwNCiAgICAgICAgZXJyb3I6IGZhbHNlLA0KICAgICAgICBtZXNzYWdlOiAnJywNCiAgICAgICAgaXNTaGFraW5nOiBmYWxzZSwNCg0KICAgICAgICBzaG93TG9naW46IGZhbHNlLA0KICAgICAgICBwYXBlcjogdHJ1ZSwNCiAgICAgICAgZW1haWw6ICcnLA0KICAgICAgICBwYXNzOiAnJywNCg0KICAgICAgICAvLyBjc3MgY2xhc3Nlcw0KICAgICAgICBtc2dDbGFzczogJ21lc3NhZ2UnLA0KICAgICAgICBub0Vycm9yQ2xhc3M6ICdub0Vycm9yJywNCiAgICAgICAgZXJyb3JDbGFzczogJ2Vycm9yJw0KICAgICAgfTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgaW5pdCgpIHsNCiAgICAgICAgICAgIGxldCBkYXRhID0gdGhpcy4kc3RvcmUuZ2V0SXRlbSh0aGlzLnN0b3JlS2V5KQ0KICAgICAgICAgICAgaWYgKGRhdGEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVtYWlsID0gZGF0YS5lbWFpbA0KICAgICAgICAgICAgICAgIHRoaXMuc2V0R1dTdGF0dXNJbnRlcnZhbCgpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXMub3BlbkxvZ2luTW9kYWwoKQ0KICAgICAgICB9LA0KDQogICAgICAgIGNoZWNrR1dydW5uaW5nKCkgew0KICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KDQogICAgICAgICAgICB0aGlzLiRodHRwDQogICAgICAgICAgICAuZ2V0KGNvbnN0YW50cy51cmxzLmxpdmVEZXBsLmdhdGV3YXkuc3RhdHVzICsgJy8nICsgdGhpcy5lbWFpbCkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoJ2Vycm9yJyBpbiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEuZXJyb3INCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSByZXNwb25zZS5kYXRhLnN0YXR1cw0KDQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRHV0xvZ3NJbnRlcnZhbCgpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UNCiAgICAgICAgICAgICAgICB0aGlzLnNoYWtlTW9kYWwoKQ0KDQogICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09IGNvbnN0YW50cy5zdHJpbmdzLm5ldHdvcmtFcnJvcikgew0KICAgICAgICAgICAgICAgICAgICBoZWxwZXIubm90aWZ5QXVkaW8odGhpcywgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nvbm5lY3Rpb25Mb3N0JyksICdkYW5nZXInLCBgJHt0aGlzLiR0KCdsb2dpbi5JQi50aXRsZScpfSAke3RoaXMuJHQoJ2xvZ2luLklCLnN0YXR1cycpfWApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHRoaXMubG9hZGluZyA9IGZhbHNlKQ0KICAgICAgICB9LA0KDQogICAgICAgIGxvZ0luICgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnBhcGVyKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zdGFydEdXKCkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdsb2dpbi5JQi5jb25maXJtTGl2ZScpKQ0KICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEdXKCkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7fSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwgICANCiAgICAgICAgZGlzY29ubmVjdCgpIHsNCiAgICAgICAgICAgIHRoaXMuc3RvcEdXKCkNCiAgICAgICAgfSwgDQoNCiAgICAgICAgc3RhcnRHVygpIHsNCiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCg0KICAgICAgICAgICAgdGhpcy4kaHR0cA0KICAgICAgICAgICAgLnBvc3QoY29uc3RhbnRzLnVybHMubGl2ZURlcGwuZ2F0ZXdheS5zdGFydCwgew0KICAgICAgICAgICAgICAgIHRyYWRpbmdNb2RlOiB0aGlzLnBhcGVyID8gJ3BhcGVyJyA6ICdsaXZlJywNCiAgICAgICAgICAgICAgICB1c2VyaWQ6IHRoaXMuZW1haWwsDQogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzcw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2UNCiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWUNCiAgICAgICAgICAgICAgICB0aGlzLnBhc3MgPSAnJw0KDQogICAgICAgICAgICAgICAgdGhpcy5zZXRHV0xvZ3NJbnRlcnZhbCgpDQoNCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh0aGlzLiRyb3V0ZS5xdWVyeS5yZWRpcmVjdCB8fCAnLycpICAgICAgICAgLy8gcmVkaXJlY3QgdG8gRGFzaGJvYXJkDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2hha2VNb2RhbCgpDQoNCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gY29uc3RhbnRzLnN0cmluZ3MubmV0d29ya0Vycm9yKSB7DQogICAgICAgICAgICAgICAgICAgIGhlbHBlci5ub3RpZnlBdWRpbyh0aGlzLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdGlvbkxvc3QnKSwgJ2RhbmdlcicsIGAke3RoaXMuJHQoJ2xvZ2luLklCLnRpdGxlJyl9ICR7dGhpcy4kdCgnbG9naW4uSUIubG9naW4nKX1gKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlDQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCd0eXBlJyBpbiBlcnJvci5yZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEudHlwZSArICcgZXJyb3InDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCdtZXNzYWdlJyBpbiBlcnJvci5yZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgKz0gJzogJyArIGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlICs9ICcuJw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuZmluYWxseSgoKSA9PiB0aGlzLmxvYWRpbmcgPSBmYWxzZSkNCiAgICAgICAgfSwNCiAgICAgICAgc3RvcEdXKCkgew0KICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KDQogICAgICAgICAgICB0aGlzLiRodHRwDQogICAgICAgICAgICAucG9zdChjb25zdGFudHMudXJscy5saXZlRGVwbC5nYXRld2F5LnN0b3AsIHsgdXNlcmlkOiB0aGlzLmVtYWlsIH0sIHRoaXMuJHN0b3JlLmdldEl0ZW0oJ2hlYWRlcnMnKSkgICAvLyBhdXRob3JpemVkIGJlY2F1c2UgR1cgZG9lc24ndCBuZWVkIGF1dGhvcml6YXRpb24NCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2UNCiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlDQoNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5HV0xvZ3NUaW1lcikgew0KICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuR1dMb2dzVGltZXIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHRoaXMuc2hha2VNb2RhbCgpDQoNCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gY29uc3RhbnRzLnN0cmluZ3MubmV0d29ya0Vycm9yKSB7DQogICAgICAgICAgICAgICAgICAgIGhlbHBlci5ub3RpZnlBdWRpbyh0aGlzLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdGlvbkxvc3QnKSwgJ2RhbmdlcicsIGAke3RoaXMuJHQoJ2xvZ2luLklCLnRpdGxlJyl9ICR7dGhpcy4kdCgnbG9naW4uZGlzY29ubmVjdCcpfWApDQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoJ3R5cGUnIGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS50eXBlICsgJyBlcnJvcicNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoJ21lc3NhZ2UnIGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSArPSAnOiAnICsgZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgKz0gJy4nDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gdGhpcy5sb2FkaW5nID0gZmFsc2UpDQogICAgICAgIH0sIA0KDQogICAgICAgIHNldEludGVydmFsKHRpbWVyLCByb3V0aW5lKSB7DQogICAgICAgICAgICByb3V0aW5lKCkNCiAgICAgICAgDQogICAgICAgICAgICBpZiAodGltZXIpIHsNCiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHsgDQogICAgICAgICAgICAgICAgcm91dGluZSgpDQogICAgICAgICAgICB9LCBjb25zdGFudHMuaW50ZXJ2YWxzLnNvdW5kU2lnbmFsICkNCiAgICAgICAgfSwNCiAgICAgICAgDQogICAgICAgIHNldEdXU3RhdHVzSW50ZXJ2YWwoKSB7DQogICAgICAgICAgICB0aGlzLnNldEludGVydmFsKHRoaXMuR1dTdGF0dXNUaW1lciwgdGhpcy5jaGVja0dXcnVubmluZykNCiAgICAgICAgfSwNCiAgICAgICAgc2V0R1dMb2dzSW50ZXJ2YWwoKSB7DQogICAgICAgICAgICB0aGlzLnNldEludGVydmFsKHRoaXMuR1dMb2dzVGltZXIsIHRoaXMuZ2V0R1dMb2dzKQ0KICAgICAgICB9LA0KICAgICAgICBnZXRHV0xvZ3MoKSB7DQogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQoNCiAgICAgICAgICAgIHRoaXMuJGh0dHANCiAgICAgICAgICAgIC5nZXQoY29uc3RhbnRzLnVybHMubGl2ZURlcGwuZ2F0ZXdheS5sb2dzICsgJy8nICsgdGhpcy5lbWFpbCwgdGhpcy4kc3RvcmUuZ2V0SXRlbSgnaGVhZGVycycpKSAgIC8vIGF1dGhvcml6ZWQgYmVjYXVzZSBHVyBkb2Vzbid0IG5lZWQgYXV0aG9yaXphdGlvbg0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGlmICgnZXJyb3InIGluIHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IHRydWUNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dzID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlDQogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3IubWVzc2FnZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2hha2VNb2RhbCgpDQoNCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gY29uc3RhbnRzLnN0cmluZ3MubmV0d29ya0Vycm9yKSB7DQogICAgICAgICAgICAgICAgICAgIGhlbHBlci5ub3RpZnlBdWRpbyh0aGlzLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdGlvbkxvc3QnKSwgJ2RhbmdlcicsIGAke3RoaXMuJHQoJ2xvZ2luLklCLnRpdGxlJyl9ICR7dGhpcy4kdCgnbG9naW4uSUIubG9ncycpfWApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHRoaXMubG9hZGluZyA9IGZhbHNlKQ0KICAgICAgICB9LA0KDQogICAgICAgIHNoYWtlTW9kYWwoKXsNCiAgICAgICAgICAgIHRoaXMuaXNTaGFraW5nID0gdHJ1ZQ0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IA0KICAgICAgICAgICAgICAgIHRoaXMuaXNTaGFraW5nID0gZmFsc2UNCiAgICAgICAgICAgIH0sIGNvbnN0YW50cy5pbnRlcnZhbHMuc2hha2UgKTsNCiAgICAgICAgICAgIHRoaXMucGFzcyA9ICcnDQogICAgICAgIH0sDQogICAgICAgIA0KICAgICAgICBvcGVuTG9naW5Nb2RhbCgpew0KICAgICAgICAgICAgdGhpcy5lcnJvciA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnJw0KICAgICAgICAgICAgdGhpcy5wYXNzID0gJycNCg0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5zaG93TG9naW4gPSB0cnVlICANCiAgICAgICAgICAgIH0sIGNvbnN0YW50cy5pbnRlcnZhbHMubG9naW5TaG93ICk7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5pbml0KCkNCiAgICB9LA0KDQogICAgZGVzdHJveWVkKCkgew0KICAgICAgICBpZiAodGhpcy5HV1N0YXR1c1RpbWVyKSB7DQogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuR1dTdGF0dXNUaW1lcikNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5HV0xvZ3NUaW1lcikgew0KICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLkdXTG9nc1RpbWVyKQ0KICAgICAgICB9DQogICAgfSwNCg0KICAgIHdhdGNoOiB7DQogICAgICAgIGVtYWlsKHZhbCkgew0KICAgICAgICAgICAgaGVscGVyLnVwZGF0ZVN0b3JlKHRoaXMuJHN0b3JlLCAnZW1haWwnLCB2YWwsIHRoaXMuc3RvcmVLZXkpICAgICAgICAgICAgDQogICAgICAgIH0sDQogICAgICAgIGNvbm5lY3RlZCh2YWwpIHsNCiAgICAgICAgICAgIGhlbHBlci51cGRhdGVTdG9yZSh0aGlzLiRzdG9yZSwgJ2Nvbm5lY3RlZCcsIHZhbCwgdGhpcy5zdG9yZUtleSkNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["IBConnection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"IBConnection.vue","sourceRoot":"src/custom/apps","sourcesContent":["<template>\r\n    <div>\r\n\r\n        <div class=\"row\" style=\"margin-top: 20px\">\r\n            <SlideYUpTransition>\r\n\r\n                <card type=\"secondary\"\r\n                    header-classes=\"bg-white pb-5\"\r\n                    body-classes=\"p-0 px-lg-5 py-lg-5\"\r\n                    class=\"modal-sm animated landingCard\"\r\n                    :class=\"{ shake: isShaking }\"\r\n                    v-if=\"showLogin\">\r\n                    <DualRingLoader v-if=\"loading\" :color=\"'#54f1d2'\" :class=\"[ connected ? 'loader' : 'loaderDisconnected', 'loader' ]\" />\r\n                    <template>\r\n                        <div v-if=\"!connected\" class=\"text-center text-muted mb-4\">\r\n                            {{ `${$t('login.signIn')} ${$t('login.with')} ` }}<b>{{ `${$t('login.IB.title')} ` }}</b>{{ $t('login.IB.credentials') }}\r\n                        </div>\r\n                        <form role=\"form\">\r\n                            <base-input v-if=\"!connected\"\r\n                                        alternative\r\n                                        class=\"mb-3\"\r\n                                        :placeholder=\"$t('login.username')\"\r\n                                        addon-left-icon=\"ni ni-email-83\"\r\n                                        v-model=\"email\"\r\n                                        @keyup.enter=\"logIn\">\r\n                            </base-input>\r\n                            <base-input v-if=\"!connected\"\r\n                                        alternative\r\n                                        type=\"password\"\r\n                                        :placeholder=\"$t('login.password')\"\r\n                                        addon-left-icon=\"ni ni-lock-circle-open\"\r\n                                        v-model=\"pass\"\r\n                                        @keyup.enter=\"logIn\">\r\n                            </base-input>\r\n                            <div class=\"text-center\">\r\n                                <p :class=\"[ error ? errorClass : noErrorClass , msgClass ]\">{{message}}</p>\r\n                            </div>\r\n                            <base-checkbox v-if=\"!connected\" v-model=\"paper\">\r\n                                {{$t('login.IB.paper')}}\r\n                            </base-checkbox>\r\n                            <div class=\"text-center\">\r\n                                <base-button v-if=\"!connected\" type=\"secondary\" class=\"my-4\" @click=\"logIn\">{{$t('login.signIn')}}</base-button>\r\n                                <base-button v-else type=\"secondary\" class=\"my-4\" @click=\"disconnect\">{{$t('login.disconnect')}}</base-button>\r\n                            </div>\r\n                        </form>\r\n                    </template>\r\n                </card>\r\n\r\n            </SlideYUpTransition>\r\n        </div>\r\n\r\n        <div class=\"row\" style=\"margin-top: 20px\">\r\n            <ul v-if=\"connected\" style=\"list-style-type: none;\">\r\n                <li v-for=\"log in logs\">            \r\n                    {{`[${log.timestamp}] ${log.info}`}}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nimport { SlideYUpTransition } from \"vue2-transitions\";\r\nimport DualRingLoader from '@bit/joshk.vue-spinners-css.dual-ring-loader';\r\nimport '../assets/css/shake.css'\r\n\r\nimport constants from '@/custom/assets/js/constants'\r\nimport helper from '@/custom/assets/js/helper'\r\n\r\n\r\nexport default {\r\n    components: {\r\n        SlideYUpTransition,\r\n        DualRingLoader\r\n    },\r\n    data() {\r\n      return { \r\n        storeKey: constants.translationKeys.IBLogin,\r\n        GWLogsTimer: null,\r\n        logs: [],\r\n\r\n        loading: false,        \r\n        connected: false,\r\n        error: false,\r\n        message: '',\r\n        isShaking: false,\r\n\r\n        showLogin: false,\r\n        paper: true,\r\n        email: '',\r\n        pass: '',\r\n\r\n        // css classes\r\n        msgClass: 'message',\r\n        noErrorClass: 'noError',\r\n        errorClass: 'error'\r\n      };\r\n    },\r\n    methods: {\r\n        init() {\r\n            let data = this.$store.getItem(this.storeKey)\r\n            if (data) {\r\n                this.email = data.email\r\n                this.setGWStatusInterval()\r\n            }\r\n\r\n            this.openLoginModal()\r\n        },\r\n\r\n        checkGWrunning() {\r\n            this.loading = true\r\n\r\n            this.$http\r\n            .get(constants.urls.liveDepl.gateway.status + '/' + this.email)\r\n            .then(response => {\r\n                if ('error' in response.data) {\r\n                    this.error = true\r\n                    this.message = response.data.error\r\n                } else {\r\n                    this.error = false\r\n                    this.connected = response.data.status\r\n\r\n                    if (this.connected) {\r\n                        this.setGWLogsInterval()\r\n                    }\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                this.error = true\r\n                this.message = error.message\r\n                this.shakeModal()\r\n\r\n                if (error.message === constants.strings.networkError) {\r\n                    helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', `${this.$t('login.IB.title')} ${this.$t('login.IB.status')}`)\r\n                }\r\n            })\r\n            .finally(() => this.loading = false)\r\n        },\r\n\r\n        logIn () {\r\n            if (this.paper) {\r\n                this.startGW()\r\n            } else {\r\n                this.$confirm(this.$t('login.IB.confirmLive'))\r\n                .then(() => {\r\n                    this.startGW()\r\n                })\r\n                .catch(() => {})\r\n            }\r\n        },   \r\n        disconnect() {\r\n            this.stopGW()\r\n        }, \r\n\r\n        startGW() {\r\n            this.loading = true\r\n\r\n            this.$http\r\n            .post(constants.urls.liveDepl.gateway.start, {\r\n                tradingMode: this.paper ? 'paper' : 'live',\r\n                userid: this.email,\r\n                password: this.pass\r\n            })\r\n            .then(response => {\r\n                this.error = false\r\n                this.message = response.data.message\r\n                this.connected = true\r\n                this.pass = ''\r\n\r\n                this.setGWLogsInterval()\r\n\r\n                this.$router.replace(this.$route.query.redirect || '/')         // redirect to Dashboard\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                this.error = true\r\n                this.shakeModal()\r\n\r\n                if (error.message === constants.strings.networkError) {\r\n                    helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', `${this.$t('login.IB.title')} ${this.$t('login.IB.login')}`)\r\n                    this.message = error.message\r\n                }\r\n\r\n                if ('type' in error.response.data) {\r\n                    this.message = error.response.data.type + ' error'\r\n\r\n                    if ('message' in error.response.data) {\r\n                        this.message += ': ' + error.response.data.message\r\n                    } else {\r\n                        this.message += '.'\r\n                    }\r\n                }                \r\n            })\r\n            .finally(() => this.loading = false)\r\n        },\r\n        stopGW() {\r\n            this.loading = true\r\n\r\n            this.$http\r\n            .post(constants.urls.liveDepl.gateway.stop, { userid: this.email }, this.$store.getItem('headers'))   // authorized because GW doesn't need authorization\r\n            .then(response => {\r\n                this.error = false\r\n                this.message = response.data.message\r\n                this.connected = false\r\n\r\n                if (this.GWLogsTimer) {\r\n                    clearInterval(this.GWLogsTimer);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                this.error = true                \r\n                this.shakeModal()\r\n\r\n                if (error.message === constants.strings.networkError) {\r\n                    helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', `${this.$t('login.IB.title')} ${this.$t('login.disconnect')}`)\r\n                    this.message = error.message\r\n                }\r\n\r\n                if ('type' in error.response.data) {\r\n                    this.message = error.response.data.type + ' error'\r\n\r\n                    if ('message' in error.response.data) {\r\n                        this.message += ': ' + error.response.data.message\r\n                    } else {\r\n                        this.message += '.'\r\n                    }\r\n                }\r\n            })\r\n            .finally(() => this.loading = false)\r\n        }, \r\n\r\n        setInterval(timer, routine) {\r\n            routine()\r\n        \r\n            if (timer) {\r\n                clearInterval(timer)\r\n            }\r\n\r\n            timer = setInterval(() => { \r\n                routine()\r\n            }, constants.intervals.soundSignal )\r\n        },\r\n        \r\n        setGWStatusInterval() {\r\n            this.setInterval(this.GWStatusTimer, this.checkGWrunning)\r\n        },\r\n        setGWLogsInterval() {\r\n            this.setInterval(this.GWLogsTimer, this.getGWLogs)\r\n        },\r\n        getGWLogs() {\r\n            this.loading = true\r\n\r\n            this.$http\r\n            .get(constants.urls.liveDepl.gateway.logs + '/' + this.email, this.$store.getItem('headers'))   // authorized because GW doesn't need authorization\r\n            .then(response => {\r\n                if ('error' in response.data) {\r\n                    this.error = true\r\n                } else {\r\n                    this.error = false\r\n                    this.logs = response.data\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                this.error = true\r\n                this.message = error.message\r\n                this.shakeModal()\r\n\r\n                if (error.message === constants.strings.networkError) {\r\n                    helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', `${this.$t('login.IB.title')} ${this.$t('login.IB.logs')}`)\r\n                }\r\n            })\r\n            .finally(() => this.loading = false)\r\n        },\r\n\r\n        shakeModal(){\r\n            this.isShaking = true\r\n            setTimeout(() => { \r\n                this.isShaking = false\r\n            }, constants.intervals.shake );\r\n            this.pass = ''\r\n        },\r\n        \r\n        openLoginModal(){\r\n            this.error = false\r\n            this.message = ''\r\n            this.pass = ''\r\n\r\n            setTimeout(() => {\r\n                this.showLogin = true  \r\n            }, constants.intervals.loginShow );\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        this.init()\r\n    },\r\n\r\n    destroyed() {\r\n        if (this.GWStatusTimer) {\r\n            clearInterval(this.GWStatusTimer)\r\n        }\r\n        if (this.GWLogsTimer) {\r\n            clearInterval(this.GWLogsTimer)\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        email(val) {\r\n            helper.updateStore(this.$store, 'email', val, this.storeKey)            \r\n        },\r\n        connected(val) {\r\n            helper.updateStore(this.$store, 'connected', val, this.storeKey)\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.landingCard {\r\n    margin: auto;\r\n    border-radius: 1rem;\r\n    background: #2f3668;\r\n}\r\n\r\n.message {\r\n    white-space: pre-line;\r\n}\r\n\r\n.noError {\r\n    color: gray;    \r\n}\r\n\r\n.error {\r\n  color: red !important;\r\n}\r\n\r\n.loader {\r\n  width: 80px; \r\n  height: 80px;  \r\n  position: absolute;\r\n  left: 150px;\r\n  top: 10px;\r\n  z-index: 1;\r\n}\r\n\r\n.loaderDisconnected {\r\n    top: 60px;\r\n}\r\n</style>"]}]}