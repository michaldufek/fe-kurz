{"remainingRequest":"/home/dufek/Documents/gitlab/frs-apps/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dufek/Documents/gitlab/frs-apps/src/custom/apps/IBConnection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dufek/Documents/gitlab/frs-apps/src/custom/apps/IBConnection.vue","mtime":1595835860230},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBTbGlkZVlVcFRyYW5zaXRpb24gfSBmcm9tICJ2dWUyLXRyYW5zaXRpb25zIjsNCmltcG9ydCBEdWFsUmluZ0xvYWRlciBmcm9tICdAYml0L2pvc2hrLnZ1ZS1zcGlubmVycy1jc3MuZHVhbC1yaW5nLWxvYWRlcic7DQppbXBvcnQgJy4uL2Fzc2V0cy9jc3Mvc2hha2UuY3NzJw0KDQppbXBvcnQgY29uc3RhbnRzIGZyb20gJ0AvY3VzdG9tL2Fzc2V0cy9qcy9jb25zdGFudHMnDQppbXBvcnQgaGVscGVyIGZyb20gJ0AvY3VzdG9tL2Fzc2V0cy9qcy9oZWxwZXInDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgU2xpZGVZVXBUcmFuc2l0aW9uLA0KICAgICAgICBEdWFsUmluZ0xvYWRlcg0KICAgIH0sDQoNCiAgICBkYXRhKCkgew0KICAgICAgcmV0dXJuIHsgDQogICAgICAgIHN0b3JlS2V5OiBjb25zdGFudHMudHJhbnNsYXRpb25LZXlzLklCTG9naW4sDQogICAgICAgIGxvZ3M6IFtdLA0KDQogICAgICAgIEdXU3RhdHVzVGltZXI6IG51bGwsDQogICAgICAgIEdXU3RhcnRTdGF0dXNUaW1lcjogbnVsbCwNCiAgICAgICAgR1dTdG9wU3RhdHVzVGltZXI6IG51bGwsDQogICAgICAgIEdXTG9nc1RpbWVyOiBudWxsLA0KDQogICAgICAgIGxvYWRpbmc6IGZhbHNlLCAgICAgICAgDQogICAgICAgIGxvYWRpbmdTdGFydDogZmFsc2UsDQogICAgICAgIGxvYWRpbmdTdG9wOiBmYWxzZSwNCg0KICAgICAgICBjb25uZWN0ZWQ6IGZhbHNlLA0KICAgICAgICBlcnJvcjogZmFsc2UsDQogICAgICAgIG1lc3NhZ2U6ICcnLA0KICAgICAgICBpc1NoYWtpbmc6IGZhbHNlLA0KDQogICAgICAgIHNob3dMb2dpbjogZmFsc2UsDQogICAgICAgIHBhcGVyOiB0cnVlLA0KICAgICAgICBlbWFpbDogJycsDQogICAgICAgIHBhc3M6ICcnLA0KDQogICAgICAgIC8vIGNzcyBjbGFzc2VzDQogICAgICAgIG1zZ0NsYXNzOiAnbWVzc2FnZScsDQogICAgICAgIG5vRXJyb3JDbGFzczogJ25vRXJyb3InLA0KICAgICAgICBlcnJvckNsYXNzOiAnZXJyb3InDQogICAgICB9Ow0KICAgIH0sDQoNCiAgICBjb21wdXRlZDogew0KICAgICAgICBsb2dzUGFyc2VkKCkgew0KICAgICAgICAgICAgLy8gcmV0dXJuIHRoaXMubG9ncy5tYXAobG9nID0+IGBbJHtoZWxwZXIuZm9ybWF0RGF0ZVRpbWUobG9nLnRpbWVzdGFtcCl9XSAke2xvZy50eXBlfTogJHtsb2cubWVzc2FnZX1gKQ0KICAgICAgICAgICAgcmV0dXJuIGAke2hlbHBlci5mb3JtYXREYXRlVGltZSh0aGlzLmxvZ3MudGltZXN0YW1wKX06ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5sb2dzLnBvc2l0aW9ucyl9YA0KICAgICAgICB9DQogICAgfSwNCg0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgaW5pdCgpIHsNCiAgICAgICAgICAgIGxldCBkYXRhID0gdGhpcy4kc3RvcmUuZ2V0SXRlbSh0aGlzLnN0b3JlS2V5KQ0KICAgICAgICAgICAgaWYgKGRhdGEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVtYWlsID0gZGF0YS5lbWFpbA0KICAgICAgICAgICAgICAgIHRoaXMuc2V0R1dTdGF0dXNJbnRlcnZhbCgpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXMub3BlbkxvZ2luTW9kYWwoKQ0KICAgICAgICB9LA0KDQogICAgICAgIGNoZWNrR1dydW5uaW5nKCkgew0KICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KDQogICAgICAgICAgICB0aGlzLiRodHRwDQogICAgICAgICAgICAuZ2V0KGNvbnN0YW50cy51cmxzLmxpdmVEZXBsLmdhdGV3YXkuc3RhdHVzICsgJy8nICsgdGhpcy5lbWFpbCkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoJ2Vycm9yJyBpbiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEuZXJyb3INCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHJlc3BvbnNlLmRhdGEuc3RhdHVzDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7ICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEdXTG9nc0ludGVydmFsKCkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZGluZ1N0YXJ0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nU3RhcnQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHRoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0IHx8ICcvJykgICAgICAgICAvLyByZWRpcmVjdCB0byBEYXNoYm9hcmQNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRpbmdTdG9wKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nU3RvcCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLkdXU3RvcFN0YXR1c1RpbWVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5HV0xvZ3NUaW1lcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5HV0xvZ3NUaW1lcik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UNCiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zaGFrZU1vZGFsKCkNCg0KICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlID09PSBjb25zdGFudHMuc3RyaW5ncy5uZXR3b3JrRXJyb3IpIHsNCiAgICAgICAgICAgICAgICAgICAgaGVscGVyLm5vdGlmeUF1ZGlvKHRoaXMsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25uZWN0aW9uTG9zdCcpLCAnZGFuZ2VyJywgYCR7dGhpcy4kdCgnbG9naW4uSUIudGl0bGUnKX0gJHt0aGlzLiR0KCdsb2dpbi5JQi5zdGF0dXMnKX1gKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuZmluYWxseSgoKSA9PiB0aGlzLmxvYWRpbmcgPSBmYWxzZSkNCiAgICAgICAgfSwNCg0KICAgICAgICBsb2dJbiAoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5wYXBlcikgew0KICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRHVygpDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgnbG9naW4uSUIuY29uZmlybUxpdmUnKSkNCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRHVygpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pDQogICAgICAgICAgICB9DQogICAgICAgIH0sICAgDQogICAgICAgIGRpc2Nvbm5lY3QoKSB7DQogICAgICAgICAgICB0aGlzLnN0b3BHVygpDQogICAgICAgIH0sIA0KDQogICAgICAgIHN0YXJ0R1coKSB7DQogICAgICAgICAgICB0aGlzLmxvYWRpbmdTdGFydCA9IHRydWUNCg0KICAgICAgICAgICAgdGhpcy4kaHR0cA0KICAgICAgICAgICAgLnBvc3QoY29uc3RhbnRzLnVybHMubGl2ZURlcGwuZ2F0ZXdheS5zdGFydCwgew0KICAgICAgICAgICAgICAgIHRyYWRpbmdNb2RlOiB0aGlzLnBhcGVyID8gJ3BhcGVyJyA6ICdsaXZlJywNCiAgICAgICAgICAgICAgICB1c2VyaWQ6IHRoaXMuZW1haWwsDQogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzcw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2UgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlDQogICAgICAgICAgICAgICAgdGhpcy5wYXNzID0gJycNCg0KICAgICAgICAgICAgICAgIHRoaXMuc2V0SW50ZXJ2YWwoJ0dXU3RhcnRTdGF0dXNUaW1lcicsIHRoaXMuY2hlY2tHV3J1bm5pbmcsIGNvbnN0YW50cy5pbnRlcnZhbHMuc2Vjb25kczMpDQogICAgICAgICAgICAgICAgdGhpcy5zZXRHV1RpbWVvdXQoJ3N0YXJ0JywgdGhpcy5HV1N0YXJ0U3RhdHVzVGltZXIpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2hha2VNb2RhbCgpDQogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nU3RhcnQgPSBmYWxzZQ0KDQogICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09IGNvbnN0YW50cy5zdHJpbmdzLm5ldHdvcmtFcnJvcikgew0KICAgICAgICAgICAgICAgICAgICBoZWxwZXIubm90aWZ5QXVkaW8odGhpcywgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nvbm5lY3Rpb25Mb3N0JyksICdkYW5nZXInLCBgJHt0aGlzLiR0KCdsb2dpbi5JQi50aXRsZScpfSAke3RoaXMuJHQoJ2xvZ2luLklCLmxvZ2luJyl9YCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3IubWVzc2FnZQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yDQogICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIHN0b3BHVygpIHsNCiAgICAgICAgICAgIHRoaXMubG9hZGluZ1N0b3AgPSB0cnVlDQoNCiAgICAgICAgICAgIHRoaXMuJGh0dHANCiAgICAgICAgICAgIC5wb3N0KGNvbnN0YW50cy51cmxzLmxpdmVEZXBsLmdhdGV3YXkuc3RvcCwgeyB1c2VyaWQ6IHRoaXMuZW1haWwgfSwgdGhpcy4kc3RvcmUuZ2V0SXRlbSgnaGVhZGVycycpKSAgIC8vIGF1dGhvcml6ZWQgYmVjYXVzZSBHVyBkb2Vzbid0IG5lZWQgYXV0aG9yaXphdGlvbg0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZQ0KDQogICAgICAgICAgICAgICAgdGhpcy5zZXRJbnRlcnZhbCgnR1dTdG9wU3RhdHVzVGltZXInLCB0aGlzLmNoZWNrR1dydW5uaW5nLCBjb25zdGFudHMuaW50ZXJ2YWxzLnNlY29uZHMzKQ0KICAgICAgICAgICAgICAgIHRoaXMuc2V0R1dUaW1lb3V0KCdzdG9wJywgdGhpcy5HV1N0b3BTdGF0dXNUaW1lcikNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlDQogICAgICAgICAgICAgICAgdGhpcy5zaGFrZU1vZGFsKCkNCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdTdG9wID0gZmFsc2UNCg0KICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlID09PSBjb25zdGFudHMuc3RyaW5ncy5uZXR3b3JrRXJyb3IpIHsNCiAgICAgICAgICAgICAgICAgICAgaGVscGVyLm5vdGlmeUF1ZGlvKHRoaXMsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25uZWN0aW9uTG9zdCcpLCAnZGFuZ2VyJywgYCR7dGhpcy4kdCgnbG9naW4uSUIudGl0bGUnKX0gJHt0aGlzLiR0KCdsb2dpbi5kaXNjb25uZWN0Jyl9YCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3IubWVzc2FnZQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwgDQoNCiAgICAgICAgc2V0SW50ZXJ2YWwobmFtZSwgcm91dGluZSwgaW50ZXJ2YWwgPSBjb25zdGFudHMuaW50ZXJ2YWxzLm1pbnV0ZSkgew0KICAgICAgICAgICAgcm91dGluZSgpDQogICAgICAgIA0KICAgICAgICAgICAgaWYgKHRoaXNbbmFtZV0pIHsNCiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXNbbmFtZV0pDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICAgICAgICAgICAgcm91dGluZSgpDQogICAgICAgICAgICB9LCBpbnRlcnZhbCApDQogICAgICAgIH0sDQogICAgICAgIHNldEdXVGltZW91dChhY3Rpb24sIHRpbWVyKSB7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgDQogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IHRydWUNCiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnR2F0ZXdheSAnICsgYWN0aW9uICsgJyB0aW1lb3V0LicNCg0KICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpDQoNCiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09ICdzdGFydCcpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nU3RhcnQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09ICdzdG9wJykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdTdG9wID0gZmFsc2UNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LCBjb25zdGFudHMuaW50ZXJ2YWxzLm1pbnV0ZSApDQogICAgICAgIH0sICAgICAgDQogICAgICAgIA0KICAgICAgICBzZXRHV1N0YXR1c0ludGVydmFsKCkgew0KICAgICAgICAgICAgdGhpcy5zZXRJbnRlcnZhbCgnR1dTdGF0dXNUaW1lcicsIHRoaXMuY2hlY2tHV3J1bm5pbmcpDQogICAgICAgIH0sDQogICAgICAgIHNldEdXTG9nc0ludGVydmFsKCkgew0KICAgICAgICAgICAgdGhpcy5zZXRJbnRlcnZhbCgnR1dMb2dzVGltZXInLCB0aGlzLmdldEdXTG9ncykNCiAgICAgICAgfSwNCiAgICAgICAgZGVzdHJveVRpbWVycygpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLkdXU3RhdHVzVGltZXIpIHsNCiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuR1dTdGF0dXNUaW1lcikNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHRoaXMuR1dTdGFydFN0YXR1c1RpbWVyKSB7DQogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLkdXU3RhcnRTdGF0dXNUaW1lcikNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHRoaXMuR1dTdG9wU3RhdHVzVGltZXIpIHsNCiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuR1dTdG9wU3RhdHVzVGltZXIpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICh0aGlzLkdXTG9nc1RpbWVyKSB7DQogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLkdXTG9nc1RpbWVyKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgICAgIGdldEdXTG9ncygpIHsNCiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCg0KICAgICAgICAgICAgdGhpcy4kaHR0cA0KICAgICAgICAgICAgLmdldChjb25zdGFudHMudXJscy5saXZlRGVwbC5nYXRld2F5LmxvZ3MgKyAnLycgKyB0aGlzLmVtYWlsLCB0aGlzLiRzdG9yZS5nZXRJdGVtKCdoZWFkZXJzJykpICAgLy8gYXV0aG9yaXplZCBiZWNhdXNlIEdXIGRvZXNuJ3QgbmVlZCBhdXRob3JpemF0aW9uDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCdlcnJvcicgaW4gcmVzcG9uc2UuZGF0YSkgeyAgICAgIC8vIGN1cnJlbnRseSBub3QgdXNlZCBpbiBHVyBMb2dzIHJlc3BvbnNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dzID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlDQogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3IubWVzc2FnZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2hha2VNb2RhbCgpDQoNCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gY29uc3RhbnRzLnN0cmluZ3MubmV0d29ya0Vycm9yKSB7DQogICAgICAgICAgICAgICAgICAgIGhlbHBlci5ub3RpZnlBdWRpbyh0aGlzLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdGlvbkxvc3QnKSwgJ2RhbmdlcicsIGAke3RoaXMuJHQoJ2xvZ2luLklCLnRpdGxlJyl9ICR7dGhpcy4kdCgnbG9naW4uSUIubG9ncycpfWApDQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCd0eXBlJyBpbiBlcnJvci5yZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEudHlwZSArICcgZXJyb3InDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCdtZXNzYWdlJyBpbiBlcnJvci5yZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgKz0gJzogJyArIGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlICs9ICcuJw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHRoaXMubG9hZGluZyA9IGZhbHNlKQ0KICAgICAgICB9LA0KDQogICAgICAgIHNoYWtlTW9kYWwoKXsNCiAgICAgICAgICAgIHRoaXMuaXNTaGFraW5nID0gdHJ1ZQ0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IA0KICAgICAgICAgICAgICAgIHRoaXMuaXNTaGFraW5nID0gZmFsc2UNCiAgICAgICAgICAgIH0sIGNvbnN0YW50cy5pbnRlcnZhbHMuc2hha2UgKTsNCiAgICAgICAgICAgIHRoaXMucGFzcyA9ICcnDQogICAgICAgIH0sDQogICAgICAgIA0KICAgICAgICBvcGVuTG9naW5Nb2RhbCgpew0KICAgICAgICAgICAgdGhpcy5lcnJvciA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnJw0KICAgICAgICAgICAgdGhpcy5wYXNzID0gJycNCg0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5zaG93TG9naW4gPSB0cnVlICANCiAgICAgICAgICAgIH0sIGNvbnN0YW50cy5pbnRlcnZhbHMubG9naW5TaG93ICk7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5pbml0KCkNCiAgICB9LA0KDQogICAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICAgICAgdGhpcy5kZXN0cm95VGltZXJzKCkNCiAgICB9LCAgICANCg0KICAgIHdhdGNoOiB7DQogICAgICAgIGVtYWlsKHZhbCkgew0KICAgICAgICAgICAgaGVscGVyLnVwZGF0ZVN0b3JlKHRoaXMuJHN0b3JlLCAnZW1haWwnLCB2YWwsIHRoaXMuc3RvcmVLZXkpICAgICAgICAgICAgDQogICAgICAgIH0sDQogICAgICAgIGNvbm5lY3RlZCh2YWwpIHsNCiAgICAgICAgICAgIGhlbHBlci51cGRhdGVTdG9yZSh0aGlzLiRzdG9yZSwgJ2Nvbm5lY3RlZCcsIHZhbCwgdGhpcy5zdG9yZUtleSkNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["IBConnection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"IBConnection.vue","sourceRoot":"src/custom/apps","sourcesContent":["<template>\r\n    <div>\r\n\r\n        <div class=\"row\" style=\"margin-top: 20px\">\r\n            <SlideYUpTransition>\r\n\r\n                <card type=\"secondary\"\r\n                    header-classes=\"bg-white pb-5\"\r\n                    body-classes=\"p-0 px-lg-5 py-lg-5\"\r\n                    class=\"modal-sm animated landingCard\"\r\n                    :class=\"{ shake: isShaking }\"\r\n                    v-if=\"showLogin\">\r\n                    <DualRingLoader v-if=\"loading || loadingStart || loadingStop\" :color=\"'#54f1d2'\" :class=\"[ connected ? 'loader' : 'loaderDisconnected', 'loader' ]\" />\r\n                    <template>\r\n                        <div v-if=\"!connected\" class=\"text-center text-muted mb-4\">\r\n                            {{ `${$t('login.signIn')} ${$t('login.with')} ` }}<b>{{ `${$t('login.IB.title')} ` }}</b>{{ $t('login.IB.credentials') }}\r\n                        </div>\r\n                        <form role=\"form\">\r\n                            <base-input v-if=\"!connected\"\r\n                                        alternative\r\n                                        class=\"mb-3\"\r\n                                        :placeholder=\"$t('login.username')\"\r\n                                        addon-left-icon=\"ni ni-email-83\"\r\n                                        v-model=\"email\"\r\n                                        @keyup.enter=\"logIn\">\r\n                            </base-input>\r\n                            <base-input v-if=\"!connected\"\r\n                                        alternative\r\n                                        type=\"password\"\r\n                                        :placeholder=\"$t('login.password')\"\r\n                                        addon-left-icon=\"ni ni-lock-circle-open\"\r\n                                        v-model=\"pass\"\r\n                                        @keyup.enter=\"logIn\">\r\n                            </base-input>\r\n                            <div class=\"text-center\">\r\n                                <p :class=\"[ error ? errorClass : noErrorClass , msgClass ]\">{{message}}</p>\r\n                            </div>\r\n                            <base-checkbox v-if=\"!connected\" v-model=\"paper\">\r\n                                {{$t('login.IB.paper')}}\r\n                            </base-checkbox>\r\n                            <div class=\"text-center\">\r\n                                <base-button v-if=\"!connected\" type=\"secondary\" class=\"my-4\" @click=\"logIn\">{{$t('login.signIn')}}</base-button>\r\n                                <base-button v-else type=\"secondary\" class=\"my-4\" @click=\"disconnect\">{{$t('login.disconnect')}}</base-button>\r\n                            </div>\r\n                        </form>\r\n                    </template>\r\n                </card>\r\n\r\n            </SlideYUpTransition>\r\n        </div>\r\n\r\n        <div class=\"row\" v-if=\"connected\" style=\"margin-top: 20px\">\r\n            <!-- <ul style=\"list-style-type: none;\">\r\n                <li v-for=\"log in logsParsed\">\r\n                    {{ log }}\r\n                </li>\r\n            </ul> -->\r\n            {{ logsParsed }}\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nimport { SlideYUpTransition } from \"vue2-transitions\";\r\nimport DualRingLoader from '@bit/joshk.vue-spinners-css.dual-ring-loader';\r\nimport '../assets/css/shake.css'\r\n\r\nimport constants from '@/custom/assets/js/constants'\r\nimport helper from '@/custom/assets/js/helper'\r\n\r\n\r\nexport default {\r\n    components: {\r\n        SlideYUpTransition,\r\n        DualRingLoader\r\n    },\r\n\r\n    data() {\r\n      return { \r\n        storeKey: constants.translationKeys.IBLogin,\r\n        logs: [],\r\n\r\n        GWStatusTimer: null,\r\n        GWStartStatusTimer: null,\r\n        GWStopStatusTimer: null,\r\n        GWLogsTimer: null,\r\n\r\n        loading: false,        \r\n        loadingStart: false,\r\n        loadingStop: false,\r\n\r\n        connected: false,\r\n        error: false,\r\n        message: '',\r\n        isShaking: false,\r\n\r\n        showLogin: false,\r\n        paper: true,\r\n        email: '',\r\n        pass: '',\r\n\r\n        // css classes\r\n        msgClass: 'message',\r\n        noErrorClass: 'noError',\r\n        errorClass: 'error'\r\n      };\r\n    },\r\n\r\n    computed: {\r\n        logsParsed() {\r\n            // return this.logs.map(log => `[${helper.formatDateTime(log.timestamp)}] ${log.type}: ${log.message}`)\r\n            return `${helper.formatDateTime(this.logs.timestamp)}: ${JSON.stringify(this.logs.positions)}`\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        init() {\r\n            let data = this.$store.getItem(this.storeKey)\r\n            if (data) {\r\n                this.email = data.email\r\n                this.setGWStatusInterval()\r\n            }\r\n\r\n            this.openLoginModal()\r\n        },\r\n\r\n        checkGWrunning() {\r\n            this.loading = true\r\n\r\n            this.$http\r\n            .get(constants.urls.liveDepl.gateway.status + '/' + this.email)\r\n            .then(response => {\r\n                if ('error' in response.data) {\r\n                    this.error = true\r\n                    this.message = response.data.error\r\n                } else {\r\n                    this.connected = response.data.status\r\n\r\n                    if (this.connected) {                        \r\n                        this.setGWLogsInterval()\r\n\r\n                        if (this.loadingStart) {\r\n                            this.loadingStart = false\r\n                            this.$router.replace(this.$route.query.redirect || '/')         // redirect to Dashboard\r\n                        }\r\n                    } else {\r\n                        if (this.loadingStop) {\r\n                            this.loadingStop = false\r\n                            clearInterval(this.GWStopStatusTimer)\r\n                        }\r\n\r\n                        if (this.GWLogsTimer) {\r\n                            clearInterval(this.GWLogsTimer);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                this.error = true\r\n                this.message = error.message\r\n                this.connected = false\r\n                this.shakeModal()\r\n\r\n                if (error.message === constants.strings.networkError) {\r\n                    helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', `${this.$t('login.IB.title')} ${this.$t('login.IB.status')}`)\r\n                }\r\n            })\r\n            .finally(() => this.loading = false)\r\n        },\r\n\r\n        logIn () {\r\n            if (this.paper) {\r\n                this.startGW()\r\n            } else {\r\n                this.$confirm(this.$t('login.IB.confirmLive'))\r\n                .then(() => {\r\n                    this.startGW()\r\n                })\r\n                .catch(() => {})\r\n            }\r\n        },   \r\n        disconnect() {\r\n            this.stopGW()\r\n        }, \r\n\r\n        startGW() {\r\n            this.loadingStart = true\r\n\r\n            this.$http\r\n            .post(constants.urls.liveDepl.gateway.start, {\r\n                tradingMode: this.paper ? 'paper' : 'live',\r\n                userid: this.email,\r\n                password: this.pass\r\n            })\r\n            .then(response => {\r\n                this.error = false                \r\n                this.message = response.data.message\r\n                this.pass = ''\r\n\r\n                this.setInterval('GWStartStatusTimer', this.checkGWrunning, constants.intervals.seconds3)\r\n                this.setGWTimeout('start', this.GWStartStatusTimer)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                this.error = true\r\n                this.shakeModal()\r\n                this.loadingStart = false\r\n\r\n                if (error.message === constants.strings.networkError) {\r\n                    helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', `${this.$t('login.IB.title')} ${this.$t('login.IB.login')}`)\r\n                    this.message = error.message\r\n                } else {\r\n                    this.message = error\r\n                }                \r\n            })\r\n        },\r\n        stopGW() {\r\n            this.loadingStop = true\r\n\r\n            this.$http\r\n            .post(constants.urls.liveDepl.gateway.stop, { userid: this.email }, this.$store.getItem('headers'))   // authorized because GW doesn't need authorization\r\n            .then(response => {\r\n                this.error = false\r\n                this.message = response.data.message\r\n\r\n                this.setInterval('GWStopStatusTimer', this.checkGWrunning, constants.intervals.seconds3)\r\n                this.setGWTimeout('stop', this.GWStopStatusTimer)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                this.error = true\r\n                this.shakeModal()\r\n                this.loadingStop = false\r\n\r\n                if (error.message === constants.strings.networkError) {\r\n                    helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', `${this.$t('login.IB.title')} ${this.$t('login.disconnect')}`)\r\n                    this.message = error.message\r\n                } else {\r\n                    this.message = error\r\n                }\r\n            })\r\n        }, \r\n\r\n        setInterval(name, routine, interval = constants.intervals.minute) {\r\n            routine()\r\n        \r\n            if (this[name]) {\r\n                clearInterval(this[name])\r\n            }\r\n\r\n            this[name] = setInterval(() => {\r\n                routine()\r\n            }, interval )\r\n        },\r\n        setGWTimeout(action, timer) {\r\n            setTimeout(() => { \r\n                this.error = true\r\n                this.message = 'Gateway ' + action + ' timeout.'\r\n\r\n                clearInterval(timer)\r\n\r\n                if (action == 'start') {\r\n                    this.loadingStart = false\r\n                } else if (action == 'stop') {\r\n                    this.loadingStop = false\r\n                }\r\n            }, constants.intervals.minute )\r\n        },      \r\n        \r\n        setGWStatusInterval() {\r\n            this.setInterval('GWStatusTimer', this.checkGWrunning)\r\n        },\r\n        setGWLogsInterval() {\r\n            this.setInterval('GWLogsTimer', this.getGWLogs)\r\n        },\r\n        destroyTimers() {\r\n            if (this.GWStatusTimer) {\r\n                clearInterval(this.GWStatusTimer)\r\n            }\r\n\r\n            if (this.GWStartStatusTimer) {\r\n                clearInterval(this.GWStartStatusTimer)\r\n            }\r\n\r\n            if (this.GWStopStatusTimer) {\r\n                clearInterval(this.GWStopStatusTimer)\r\n            }\r\n\r\n            if (this.GWLogsTimer) {\r\n                clearInterval(this.GWLogsTimer)\r\n            }\r\n        },\r\n\r\n        getGWLogs() {\r\n            this.loading = true\r\n\r\n            this.$http\r\n            .get(constants.urls.liveDepl.gateway.logs + '/' + this.email, this.$store.getItem('headers'))   // authorized because GW doesn't need authorization\r\n            .then(response => {\r\n                if ('error' in response.data) {      // currently not used in GW Logs response\r\n                    this.error = true\r\n                } else {\r\n                    this.logs = response.data\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                this.error = true\r\n                this.message = error.message\r\n                this.shakeModal()\r\n\r\n                if (error.message === constants.strings.networkError) {\r\n                    helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', `${this.$t('login.IB.title')} ${this.$t('login.IB.logs')}`)\r\n                }\r\n\r\n                if ('type' in error.response.data) {\r\n                    this.message = error.response.data.type + ' error'\r\n\r\n                    if ('message' in error.response.data) {\r\n                        this.message += ': ' + error.response.data.message\r\n                    } else {\r\n                        this.message += '.'\r\n                    }\r\n                }\r\n            })\r\n            .finally(() => this.loading = false)\r\n        },\r\n\r\n        shakeModal(){\r\n            this.isShaking = true\r\n            setTimeout(() => { \r\n                this.isShaking = false\r\n            }, constants.intervals.shake );\r\n            this.pass = ''\r\n        },\r\n        \r\n        openLoginModal(){\r\n            this.error = false\r\n            this.message = ''\r\n            this.pass = ''\r\n\r\n            setTimeout(() => {\r\n                this.showLogin = true  \r\n            }, constants.intervals.loginShow );\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        this.init()\r\n    },\r\n\r\n    beforeDestroy() {\r\n        this.destroyTimers()\r\n    },    \r\n\r\n    watch: {\r\n        email(val) {\r\n            helper.updateStore(this.$store, 'email', val, this.storeKey)            \r\n        },\r\n        connected(val) {\r\n            helper.updateStore(this.$store, 'connected', val, this.storeKey)\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.landingCard {\r\n    margin: auto;\r\n    border-radius: 1rem;\r\n    background: #2f3668;\r\n}\r\n\r\n.message {\r\n    white-space: pre-line;\r\n}\r\n\r\n.noError {\r\n    color: gray;    \r\n}\r\n\r\n.error {\r\n  color: red !important;\r\n}\r\n\r\n.loader {\r\n  width: 80px; \r\n  height: 80px;  \r\n  position: absolute;\r\n  left: 150px;\r\n  top: 10px;\r\n  z-index: 1;\r\n}\r\n\r\n.loaderDisconnected {\r\n    top: 60px;\r\n}\r\n</style>"]}]}