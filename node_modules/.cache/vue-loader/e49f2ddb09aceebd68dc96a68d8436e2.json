{"remainingRequest":"/home/dufek/Documents/gitlab/frs-apps/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dufek/Documents/gitlab/frs-apps/src/custom/apps/research/patternLab/PatternStatistics.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dufek/Documents/gitlab/frs-apps/src/custom/apps/research/patternLab/PatternStatistics.vue","mtime":1587025922792},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGYW5jeVRhYmxlIGZyb20gJ0AvY3VzdG9tL2NvbXBvbmVudHMvVGFibGVzL0ZhbmN5VGFibGUnOyAgCmltcG9ydCBGYW5jeUNhcmQgZnJvbSAnQC9jdXN0b20vY29tcG9uZW50cy9DYXJkcy9GYW5jeUNhcmQnOyAgCmltcG9ydCBPaGxjQ2hhcnQgZnJvbSAnQC9jdXN0b20vY29tcG9uZW50cy9DaGFydHMvT2hsY0NoYXJ0JzsKaW1wb3J0IFBpZUNoYXJ0Q2FyZCBmcm9tICdAL2N1c3RvbS9jb21wb25lbnRzL0NhcmRzL1BpZUNoYXJ0Q2FyZCcKCmltcG9ydCBjb25zdGFudHMgZnJvbSAnQC9jdXN0b20vYXNzZXRzL2pzL2NvbnN0YW50cyc7CmltcG9ydCBoZWxwZXIgZnJvbSAnQC9jdXN0b20vYXNzZXRzL2pzL2hlbHBlcic7Cgpjb25zdCBzS2V5ID0gJ3Jlc2VhcmNoLnBhdHRlcm5MYWIucGF0dGVyblN0YXRpc3RpY3MnCgoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgIAogICAgRmFuY3lUYWJsZSwKICAgIEZhbmN5Q2FyZCwKICAgIE9obGNDaGFydCwKICAgIFBpZUNoYXJ0Q2FyZAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdG9yZUtleTogc0tleSwKICAgICAgY29sdW1uczogdGhpcy4kdChzS2V5ICsgJy5wYXR0ZXJuc1RhYmxlLmNvbHVtbnMnKSwKCiAgICAgIC8vIHN0YXRpc3RpY3MgY2FyZAogICAgICBwYXR0ZXJuc1N0YXRzOiB7CiAgICAgICAgdG90YWw6IDAsCiAgICAgICAgYnVsbGlzaDogMCwKICAgICAgICBiZWFyaXNoOiAwCiAgICAgIH0sCiAgICAgIGNhcmRLZXk6IDAsCgogICAgICAvLyBwaWUgY2hhcnRzCiAgICAgIHNlbGVjdGVkQXNzZXQ6IG51bGwsCiAgICAgIGFzc2V0czogW10sCiAgICAgIHNlbGVjdGVkUGF0dGVybjogbnVsbCwKICAgICAgcGF0dGVybnM6IFtdLAogICAgICB0aW1lZnJhbWU6IHRoaXMuJHQoJ3Jlc2VhcmNoLnBhdHRlcm5MYWIudGltZWZyYW1lcycpWzBdLAogICAgICBjaGFydERhdGE6IHsKICAgICAgICAvLyBvbmx5IGNob3NlbiBhc3NldCBhbmQgcGF0dGVybgogICAgICAgIHBhdHRlcm5zQnlBc3NldDogbnVsbCwKICAgICAgICBhc3NldHNCeVBhdHRlcm46IG51bGwgCiAgICAgIH0sCiAgICAgIC8vIGFsbCBhc3NldHMgYW5kIHBhdHRlcm5zCiAgICAgIHBhdHRlcm5zQnlBc3NldDoge30sCiAgICAgIGFzc2V0c0J5UGF0dGVybjoge30sCiAgICAgIC8vIGluaXRQaWVDaGFydHNMb2NrOiBmYWxzZSwKCiAgICAgIC8vIHBhdHRlcm5zIHRhYmxlCiAgICAgIHBhdHRlcm5zVXJsOiBbXSwKICAgICAgdGFibGVLZXk6IDAKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICAvLyBpbml0aWFsaXphdGlvbgogICAgaW5pdERhdGEoKSB7CiAgICAgIGxldCBkYXRhID0gaGVscGVyLmdldEFzc2V0c1BhdHRlcm5zUGlja2VyRGF0YSh0aGlzLiRzdG9yZSkKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICB0aGlzLnRpbWVmcmFtZSA9IGRhdGEudGltZWZyYW1lCiAgICAgICAgdGhpcy5wYXR0ZXJuc1VybCA9IGhlbHBlci5nZXRQYXR0ZXJuTGFiSGlzdG9yeVVybChkYXRhLnNlbGVjdGVkQXNzZXRzLCBkYXRhLmNoZWNrZWRQYXR0ZXJucywgdGhpcy50aW1lZnJhbWUpCiAgICAgICAgdGhpcy50YWJsZUtleSsrIC8vIGZvcmNlIHJlbG9hZCBvZiBmYW5jeS10YWJsZSBjb21wb25lbnQKCiAgICAgICAgdGhpcy5pbml0UGllQ2hhcnRzKCkKICAgICAgfSAgICAgICAgCiAgICB9LAogICAgaW5pdFBpZUNoYXJ0cyhjb2x1bW49bnVsbCwgZmlsdGVyPW51bGwpIHsKICAgICAgaWYgKHRoaXMucGF0dGVybnNVcmwpIHsKICAgICAgICBsZXQgZGF0YXMgPSBbXSAgICAgICAgICAKICAgICAgICB0aGlzLiRodHRwCiAgICAgICAgLmdldCh0aGlzLnBhdHRlcm5zVXJsKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmRhdGEuZm9yRWFjaChkYXR1bSA9PiB7CiAgICAgICAgICAgIGlmIChkYXR1bS5jb3VudCAmJiAoIWNvbHVtbiB8fCAoY29sdW1uICYmIFN0cmluZyh0aGlzLmdldENvbHVtblZhbHVlKGNvbHVtbiwgZGF0dW0pKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlci50b0xvd2VyQ2FzZSgpKSkpKSB7CiAgICAgICAgICAgICAgZGF0YXMucHVzaChkYXR1bSkKICAgICAgICAgICAgfQogICAgICAgIH0pKQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlID09PSBjb25zdGFudHMuc3RyaW5ncy5uZXR3b3JrRXJyb3IpIHsKICAgICAgICAgICAgaGVscGVyLm5vdGlmeUF1ZGlvKHRoaXMsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25uZWN0aW9uTG9zdCcpLCAnZGFuZ2VyJywgdGhpcy4kdCgnbm90aWZpY2F0aW9ucy5iZUNvbm5lY3Rpb25Mb3N0JykgKyAnKCcgKyB0aGlzLiR0KCdzaWRlYmFyLnBhdHRlcm5MYWInKSArICcgJyArIHRoaXMuJHQodGhpcy5zdG9yZUtleSArICcudGl0bGUnKSArICcpJykKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMuYXNzZXRzID0gW10KICAgICAgICAgIHRoaXMucGF0dGVybnMgPSBbXQogICAgICAgICAgdGhpcy5wYXR0ZXJuc1N0YXRzID0geyAgLy8gZG9pbmcgaXQgaW4gZmluYWxseSBiZWNhdXNlIG9mIGVtbWl0ZWQgZXZlbnRzIGJhc2VkIGNvbmN1cnJlbmN5CiAgICAgICAgICAgIHRvdGFsOiAwLAogICAgICAgICAgICBidWxsaXNoOiAwLAogICAgICAgICAgICBiZWFyaXNoOiAwCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnBhdHRlcm5zQnlBc3NldCA9IHt9IAogICAgICAgICAgdGhpcy5hc3NldHNCeVBhdHRlcm4gPSB7fSAKCiAgICAgICAgICBkYXRhcy5mb3JFYWNoKGRhdHVtID0+IHsKICAgICAgICAgICAgdGhpcy51cGRhdGVBc3NldHNQYXR0ZXJucyhkYXR1bSkKICAgICAgICAgICAgdGhpcy51cGRhdGVQYXR0ZXJuc1N0YXRzKHRoaXMuZ2V0RGlyZWN0aW9uKGRhdHVtLnNpZ25hbF9zZXQpLCBkYXR1bS5jb3VudCkKICAgICAgICAgICAgdGhpcy51cGRhdGVDaGFydERhdGFzKGRhdHVtKQogICAgICAgICAgfSkgCiAgICAgICAgICB0aGlzLmluaXRTZWxlY3RlZEFzc2V0UGF0dGVybigpICAgICAKCiAgICAgICAgICAvLyBjcmVhdGluZyBwaWUgY2hhcnRzIGRhdGEKICAgICAgICAgIHRoaXMuY3JlYXRlQ2hhcnREYXRhcygpCiAgICAgICAgICAvLyBmb3JjZSByZWxvYWQgb2YgZmFuY3ktY2FyZCBjb21wb25lbnQKICAgICAgICAgIHRoaXMuY2FyZEtleSsrCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIGluaXRTZWxlY3RlZEFzc2V0UGF0dGVybigpIHsKICAgICAgLy8gc2V0dGluZyB2YWxpZCB2YWx1ZSBvZiBzZWxlY3RlZCBhc3NldCBhbmQgcGF0dGVybgogICAgICBsZXQgZGF0YSA9IHRoaXMuJHN0b3JlLmdldEl0ZW0odGhpcy5zdG9yZUtleSkKCiAgICAgIHRoaXMuc2VsZWN0ZWRBc3NldCA9IHRoaXMuaW5pdFNlbGVjdGVkSXRlbSh0aGlzLnNlbGVjdGVkQXNzZXQsIHRoaXMuYXNzZXRzKQogICAgICB0aGlzLnNlbGVjdGVkUGF0dGVybiA9IHRoaXMuaW5pdFNlbGVjdGVkSXRlbSh0aGlzLnNlbGVjdGVkUGF0dGVybiA/IHRoaXMuc2VsZWN0ZWRQYXR0ZXJuIDogZGF0YSA/IGRhdGEuc2VsZWN0ZWRQYXR0ZXJuIDogbnVsbCwgdGhpcy5wYXR0ZXJucykKICAgIH0sCiAgICBpbml0U2VsZWN0ZWRJdGVtKHNlbGVjdGVkQ2FuZGlkYXRlLCBpdGVtcykgewogICAgICBpZiAoc2VsZWN0ZWRDYW5kaWRhdGUgJiYgaXRlbXMuaW5jbHVkZXMoc2VsZWN0ZWRDYW5kaWRhdGUpKSB7CiAgICAgICAgcmV0dXJuIHNlbGVjdGVkQ2FuZGlkYXRlCiAgICAgIH0gZWxzZSBpZiAoaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIGl0ZW1zWzBdCiAgICAgIH0gICAgICAgIAogICAgICByZXR1cm4gbnVsbAogICAgfSwKCiAgICAvLyBlbWl0IGV2ZW50CiAgICBmaWx0ZXJlZChkYXRhKSB7CiAgICAgIHRoaXMuaW5pdFBpZUNoYXJ0cyhkYXRhLmNvbHVtbiwgZGF0YS5maWx0ZXIpCiAgICB9LAoKICAgIC8vIHRhYmxlIHJvd3MgY3JlYXRvcgogICAgcm93c0NyZWF0b3IocmVzcG9uc2VEYXRhKSB7IAogICAgICBsZXQgcm93cyA9IFtdICAgICAKCiAgICAgIHJlc3BvbnNlRGF0YS5mb3JFYWNoKGRhdGEgPT4gewogICAgICAgIGlmIChkYXRhLmNvdW50KSB7CiAgICAgICAgICBsZXQgcm93ID0gW10KICAgICAgICAgIHRoaXMuY3JlYXRlUm93KGRhdGEsIHJvdykKICAgICAgICAgIHJvd3MucHVzaChyb3cpICAgICAgICAgIAogICAgICAgIH0KICAgICAgfSkKCiAgICAgIHJldHVybiByb3dzCiAgICB9LAogICAgY3JlYXRlUm93KGRhdGEsIHJvdykgewogICAgICByb3cucHVzaChkYXRhLmhpc3RvcnkudGlja2VyLnN5bWJvbCkgLy8gQXNzZXQKICAgICAgcm93LnB1c2goZGF0YS5wYXR0ZXJuLm5hbWUpIC8vIFBhdHRlcm4KICAgICAgcm93LnB1c2goZGF0YS5jb3VudCkgLy8gIyBvZiBvY2N1cmVuY2UgICAgICAgICAgCiAgICAgIHJvdy5wdXNoKGRhdGEuc2lnbmFsX3NldC5sZW5ndGgpIC8vIFBhdHRlcm4gbGVuZ3RoCgogICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5nZXREaXJlY3Rpb24oZGF0YS5zaWduYWxfc2V0KSAgICAgICAKICAgICAgcm93LnB1c2goZGlyZWN0aW9uKSAvLyBEaXJlY3Rpb24KCiAgICAgIHJvdy5wdXNoKGRhdGEuY291bnRfbWVhbiA/IDEgLyBkYXRhLmNvdW50X21lYW4gOiBudWxsKSAvLyBBdmVyYWdlIGZyZXF1ZW5jeQoKICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gY29uc3RhbnRzLnN0cmluZ3MuYnVsbGlzaCkgewogICAgICAgIHJvdy5wdXNoKGRhdGEuZDFfYnVsbF91cCArICcgJScpICAvLyAxIGRheSB1cF9kb3duCiAgICAgICAgcm93LnB1c2goZGF0YS5kNV9idWxsX3VwICsgJyAlJykgIC8vIDUgZGF5cyB1cF9kb3duCiAgICAgICAgcm93LnB1c2goZGF0YS5kMTBfYnVsbF91cCArICcgJScpIC8vIDEwIGRheXMgdXBfZG93bgogICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gY29uc3RhbnRzLnN0cmluZ3MuYmVhcmlzaCkgewogICAgICAgIHJvdy5wdXNoKGRhdGEuZDFfYmVhcl9kb3duICsgJyAlJykKICAgICAgICByb3cucHVzaChkYXRhLmQ1X2JlYXJfZG93biArICcgJScpCiAgICAgICAgcm93LnB1c2goZGF0YS5kMTBfYmVhcl9kb3duICsgJyAlJykKICAgICAgfQogICAgfSwKICAgIGdldERpcmVjdGlvbihzaWduYWxfc2V0KSB7CiAgICAgIGxldCBkaXJlY3Rpb25OciA9IDAKICAgICAgc2lnbmFsX3NldC5mb3JFYWNoKHNpZ25hbCA9PiBkaXJlY3Rpb25OciArPSBzaWduYWwuZGlyZWN0aW9uKSAvLyB0by1kbzogaG93IHRvIGNhbGN1bGF0ZSBvdmVyYWxsIGRpcmVjdGlvbj8KCiAgICAgIHJldHVybiBoZWxwZXIuY29udmVydERpcmVjdGlvbihkaXJlY3Rpb25OcikKICAgIH0sCgogICAgZ2V0Q29sdW1uVmFsdWUoY29sdW1uLCBkYXRhKSB7CiAgICAgIGxldCBjbE5yID0gMAoKICAgICAgc3dpdGNoIChjb2x1bW4pIHsKICAgICAgICBjYXNlIHRoaXMuY29sdW1uc1tjbE5yKytdOgogICAgICAgICAgcmV0dXJuIGRhdGEuaGlzdG9yeS50aWNrZXIuc3ltYm9sIC8vIEFzc2V0CiAgICAgICAgY2FzZSB0aGlzLmNvbHVtbnNbY2xOcisrXToKICAgICAgICAgIHJldHVybiBkYXRhLnBhdHRlcm4ubmFtZSAgICAgICAgICAvLyBQYXR0ZXJuCiAgICAgICAgY2FzZSB0aGlzLmNvbHVtbnNbY2xOcisrXToKICAgICAgICAgIHJldHVybiBkYXRhLmNvdW50ICAgICAgICAgICAgICAgICAvLyAjIG9mIG9jY3VyZW5jZSAgICAgICAgICAKICAgICAgICBjYXNlIHRoaXMuY29sdW1uc1tjbE5yKytdOgogICAgICAgICAgcmV0dXJuIGRhdGEuc2lnbmFsX3NldC5sZW5ndGggICAgLy8gUGF0dGVybiBsZW5ndGgKICAgICAgICBjYXNlIHRoaXMuY29sdW1uc1tjbE5yKytdOgogICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHRoaXMuZ2V0RGlyZWN0aW9uKGRhdGEuc2lnbmFsX3NldCkgICAgICAgCiAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uICAgICAgICAgICAgICAgICAgLy8gRGlyZWN0aW9uCiAgICAgICAgY2FzZSB0aGlzLmNvbHVtbnNbY2xOcisrXToKICAgICAgICAgIHJldHVybiBkYXRhLmNvdW50X21lYW4gPyAxIC8gZGF0YS5jb3VudF9tZWFuIDogbnVsbCAvLyBBdmVyYWdlIGZyZXF1ZW5jeQogICAgICAgIGNhc2UgdGhpcy5jb2x1bW5zW2NsTnIrK106CiAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uID09PSBjb25zdGFudHMuc3RyaW5ncy5idWxsaXNoID8gZGF0YS5kMV9idWxsX3VwICsgJyAlJyA6IGRhdGEuZDFfYmVhcl9kb3duICsgJyAlJyAgLy8gMSBkYXkgdXBfZG93bgogICAgICAgIGNhc2UgdGhpcy5jb2x1bW5zW2NsTnIrK106CiAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uID09PSBjb25zdGFudHMuc3RyaW5ncy5idWxsaXNoID8gZGF0YS5kNV9idWxsX3VwICsgJyAlJyA6IGRhdGEuZDVfYmVhcl9kb3duICsgJyAlJyAgLy8gNSBkYXlzIHVwX2Rvd24KICAgICAgICBjYXNlIHRoaXMuY29sdW1uc1tjbE5yKytdOgogICAgICAgICAgcmV0dXJuIGRpcmVjdGlvbiA9PT0gY29uc3RhbnRzLnN0cmluZ3MuYnVsbGlzaCA/IGRhdGEuZDEwX2J1bGxfdXAgKyAnICUnIDogZGF0YS5kMTBfYmVhcl9kb3duICsgJyAlJyAgLy8gMTAgZGF5cyB1cF9kb3duCiAgICAgIH0KICAgIH0sCgogICAgLy8gY2hhcnQgJiBzdGF0cyBtZXRob2RzCiAgICB1cGRhdGVBc3NldHNQYXR0ZXJucyhkYXR1bSkgewogICAgICBsZXQgYXNzZXQgPSBkYXR1bS5oaXN0b3J5LnRpY2tlcgogICAgICBpZiAoIXRoaXMuYXNzZXRzLm1hcChhID0+IGEuaWQpLmluY2x1ZGVzKGFzc2V0LmlkKSkgewogICAgICAgIHRoaXMuYXNzZXRzLnB1c2goeyBpZDogYXNzZXQuaWQsIHN5bWJvbDogYXNzZXQuc3ltYm9sIH0pCiAgICAgIH0KCiAgICAgIGxldCBwYXR0ZXJuID0gZGF0dW0ucGF0dGVybgogICAgICBpZiAoIXRoaXMucGF0dGVybnMubWFwKHAgPT4gcC5pZCkuaW5jbHVkZXMocGF0dGVybi5pZCkpIHsKICAgICAgICB0aGlzLnBhdHRlcm5zLnB1c2gocGF0dGVybikKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZVBhdHRlcm5zU3RhdHMoZGlyZWN0aW9uLCBjb3VudCkgewogICAgICB0aGlzLnBhdHRlcm5zU3RhdHMudG90YWwgKz0gY291bnQKCiAgICAgIGlmIChkaXJlY3Rpb24gPT09IGNvbnN0YW50cy5zdHJpbmdzLmJ1bGxpc2gpIHsKICAgICAgICB0aGlzLnBhdHRlcm5zU3RhdHMuYnVsbGlzaCArPSBjb3VudAogICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gY29uc3RhbnRzLnN0cmluZ3MuYmVhcmlzaCkgewogICAgICAgIHRoaXMucGF0dGVybnNTdGF0cy5iZWFyaXNoICs9IGNvdW50CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVDaGFydERhdGFzKGRhdGEpIHsKICAgICAgaWYgKCEoZGF0YS5oaXN0b3J5LnRpY2tlci5zeW1ib2wgaW4gdGhpcy5wYXR0ZXJuc0J5QXNzZXQpKSB7CiAgICAgICAgdGhpcy5wYXR0ZXJuc0J5QXNzZXRbZGF0YS5oaXN0b3J5LnRpY2tlci5zeW1ib2xdID0ge30gICAgICAgICAgICAgIAogICAgICB9CiAgICAgIGlmICghKGRhdGEucGF0dGVybi5uYW1lIGluIHRoaXMucGF0dGVybnNCeUFzc2V0W2RhdGEuaGlzdG9yeS50aWNrZXIuc3ltYm9sXSkpIHsKICAgICAgICB0aGlzLnBhdHRlcm5zQnlBc3NldFtkYXRhLmhpc3RvcnkudGlja2VyLnN5bWJvbF1bZGF0YS5wYXR0ZXJuLm5hbWVdID0gMCAgICAgICAgICAgICAgCiAgICAgIH0KICAgICAgdGhpcy5wYXR0ZXJuc0J5QXNzZXRbZGF0YS5oaXN0b3J5LnRpY2tlci5zeW1ib2xdW2RhdGEucGF0dGVybi5uYW1lXSArPSBkYXRhLmNvdW50CgogICAgICBpZiAoIShkYXRhLnBhdHRlcm4ubmFtZSBpbiB0aGlzLmFzc2V0c0J5UGF0dGVybikpIHsKICAgICAgICB0aGlzLmFzc2V0c0J5UGF0dGVybltkYXRhLnBhdHRlcm4ubmFtZV0gPSB7fSAgICAgICAgICAgICAgCiAgICAgIH0KICAgICAgaWYgKCEoZGF0YS5oaXN0b3J5LnRpY2tlci5zeW1ib2wgaW4gdGhpcy5hc3NldHNCeVBhdHRlcm5bZGF0YS5wYXR0ZXJuLm5hbWVdKSkgewogICAgICAgIHRoaXMuYXNzZXRzQnlQYXR0ZXJuW2RhdGEucGF0dGVybi5uYW1lXVtkYXRhLmhpc3RvcnkudGlja2VyLnN5bWJvbF0gPSAwICAgICAgICAgICAgICAKICAgICAgfQogICAgICB0aGlzLmFzc2V0c0J5UGF0dGVybltkYXRhLnBhdHRlcm4ubmFtZV1bZGF0YS5oaXN0b3J5LnRpY2tlci5zeW1ib2xdICs9IGRhdGEuY291bnQKICAgIH0sCiAgICBjcmVhdGVDaGFydERhdGFzKCkgewogICAgICB0aGlzLmNoYXJ0RGF0YS5wYXR0ZXJuc0J5QXNzZXQgPSB0aGlzLnNlbGVjdGVkQXNzZXQgPyB0aGlzLmNyZWF0ZUNoYXJ0RGF0YSh0aGlzLnBhdHRlcm5zQnlBc3NldFt0aGlzLnNlbGVjdGVkQXNzZXQuc3ltYm9sXSkgOiBudWxsCiAgICAgIHRoaXMuY2hhcnREYXRhLmFzc2V0c0J5UGF0dGVybiA9IHRoaXMuc2VsZWN0ZWRQYXR0ZXJuID8gdGhpcy5jcmVhdGVDaGFydERhdGEodGhpcy5hc3NldHNCeVBhdHRlcm5bdGhpcy5zZWxlY3RlZFBhdHRlcm4ubmFtZV0pIDogbnVsbAogICAgfSwKICAgIGNyZWF0ZUNoYXJ0RGF0YShpdGVtcykgewogICAgICBpZiAoaXRlbXMpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGF0YXNldHM6IFt7CiAgICAgICAgICAgIGRhdGE6IE9iamVjdC52YWx1ZXMoaXRlbXMpLAogICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IE9iamVjdC5rZXlzKGl0ZW1zKS5tYXAoXyA9PiAiIyIrKCgxPDwyNCkqTWF0aC5yYW5kb20oKXwwKS50b1N0cmluZygxNikpICAvLyByYW5kb20gY29sb3JzCiAgICAgICAgICB9XSwKICAgICAgICAgIGxhYmVsczogT2JqZWN0LmtleXMoaXRlbXMpCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsCiAgICB9LCAgICAgIAoKICAgIC8vIGRyb3Bkb3ducyBzZWxlY3Rpb25zIG1ldGhvZHMKICAgIHNlbGVjdEFzc2V0KGFzc2V0KSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRBc3NldCA9IGFzc2V0CiAgICAgIHRoaXMuY3JlYXRlQ2hhcnREYXRhcygpCiAgICB9LAogICAgc2VsZWN0UGF0dGVybihwYXR0ZXJuKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRQYXR0ZXJuID0gcGF0dGVybgogICAgICB0aGlzLmNyZWF0ZUNoYXJ0RGF0YXMoKQogICAgfSAgICAgIAogIH0sCgogIHdhdGNoOiB7CiAgICBzZWxlY3RlZEFzc2V0KHZhbCkgeyAgICAgICAgCiAgICAgIGhlbHBlci51cGRhdGVTdG9yZSh0aGlzLiRzdG9yZSwgJ3NlbGVjdGVkQXNzZXQnLCB2YWwsIHRoaXMuc3RvcmVLZXkpCiAgICB9LAogICAgc2VsZWN0ZWRQYXR0ZXJuKHZhbCkgeyAgICAgICAgCiAgICAgIGhlbHBlci51cGRhdGVTdG9yZSh0aGlzLiRzdG9yZSwgJ3NlbGVjdGVkUGF0dGVybicsIHZhbCwgdGhpcy5zdG9yZUtleSkKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0RGF0YSgpOwogIH0KfSAgCg=="},{"version":3,"sources":["PatternStatistics.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"PatternStatistics.vue","sourceRoot":"src/custom/apps/research/patternLab","sourcesContent":["<template>\r\n  <div>\r\n    <audio id=\"connectionLost\" src=\"media/connectionLost.mp3\" preload=\"auto\"></audio>\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-3 col-md-12 container\">\r\n        <!-- statistics -->\r\n        <fancy-card :title=\"$t(storeKey + '.title') + ' - ' + $t(storeKey + '.statistics.title')\"\r\n                    :fullTitle=\"$t(storeKey + '.statistics.title')\"\r\n                    :showTitle=\"true\"\r\n                    :items=\"$t(storeKey + '.statistics.items')\"                    \r\n                    :values=\"[ patternsStats.total, patternsStats.bullish, patternsStats.bearish ]\"\r\n                    style=\"margin-bottom: 0px;\"\r\n                    :key=\"cardKey\">\r\n        </fancy-card>\r\n\r\n        <!-- pie charts -->\r\n        <div style=\"position: relative; left: 10px; top: 50px; z-index: 1\">\r\n          <base-dropdown class=\"dd\" \r\n                         menu-classes=\"dropdown-black\" \r\n                         title-classes=\"btn btn-secondary\"\r\n                         :title=\"selectedAsset ? selectedAsset.symbol : null\"\r\n                         style=\"width: 20%\">\r\n            <ul style=\"list-style-type: none;\">\r\n              <li v-for=\"asset in (selectedAsset ? assets.filter(a => a.id !== selectedAsset.id) : assets)\">            \r\n                <a class=\"dropdown-item\" \r\n                   @click=\"selectAsset(asset)\" \r\n                   href=\"#\">\r\n                  {{ asset.symbol }}\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </base-dropdown>\r\n        </div>\r\n        <pie-chart-card :title=\"$t(storeKey + '.title') + ' - ' + $t(storeKey + '.patternsByStock')\"\r\n                        :chartData=\"chartData.patternsByAsset\" />\r\n\r\n        <div style=\"position: relative; left: 10px; top: 50px; z-index: 1\">\r\n          <base-dropdown class=\"dd\" \r\n                         menu-classes=\"dropdown-black\" \r\n                         title-classes=\"btn btn-secondary\"\r\n                         :title=\"selectedPattern ? selectedPattern.name : null\"\r\n                         style=\"width: 20%\">\r\n            <ul style=\"list-style-type: none;\">\r\n              <li v-for=\"pattern in (selectedPattern ? patterns.filter(p => p.id !== selectedPattern.id) : patterns)\">            \r\n                <a class=\"dropdown-item\" \r\n                   @click=\"selectPattern(pattern)\" \r\n                   href=\"#\">\r\n                  {{ pattern.name }}\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </base-dropdown>\r\n        </div>\r\n        <pie-chart-card :title=\"$t(storeKey + '.title') + ' - ' + $t(storeKey + '.stocksByPattern')\"\r\n                        :chartData=\"chartData.assetsByPattern\" />\r\n      </div>\r\n\r\n      <!-- patterns table -->\r\n      <div class=\"col-lg-9 col-md-12\">\r\n        <fancy-table :title=\"$t(storeKey + '.patternsTable.title')\"\r\n                     :showTitle=\"false\"\r\n                     :apiUrls=\"patternsUrl\"\r\n                     :columns=\"columns\"\r\n                     :rowsCreator=\"rowsCreator\"\r\n                     :sortable=\"true\"\r\n                     :filterable=\"true\"\r\n                     :key=\"tableKey\"\r\n                     @filtered=\"filtered\">\r\n        </fancy-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import FancyTable from '@/custom/components/Tables/FancyTable';  \r\n  import FancyCard from '@/custom/components/Cards/FancyCard';  \r\n  import OhlcChart from '@/custom/components/Charts/OhlcChart';\r\n  import PieChartCard from '@/custom/components/Cards/PieChartCard'\r\n\r\n  import constants from '@/custom/assets/js/constants';\r\n  import helper from '@/custom/assets/js/helper';\r\n\r\n  const sKey = 'research.patternLab.patternStatistics'\r\n\r\n\r\n  export default {\r\n    components: {  \r\n      FancyTable,\r\n      FancyCard,\r\n      OhlcChart,\r\n      PieChartCard\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        storeKey: sKey,\r\n        columns: this.$t(sKey + '.patternsTable.columns'),\r\n\r\n        // statistics card\r\n        patternsStats: {\r\n          total: 0,\r\n          bullish: 0,\r\n          bearish: 0\r\n        },\r\n        cardKey: 0,\r\n\r\n        // pie charts\r\n        selectedAsset: null,\r\n        assets: [],\r\n        selectedPattern: null,\r\n        patterns: [],\r\n        timeframe: this.$t('research.patternLab.timeframes')[0],\r\n        chartData: {\r\n          // only chosen asset and pattern\r\n          patternsByAsset: null,\r\n          assetsByPattern: null \r\n        },\r\n        // all assets and patterns\r\n        patternsByAsset: {},\r\n        assetsByPattern: {},\r\n        // initPieChartsLock: false,\r\n\r\n        // patterns table\r\n        patternsUrl: [],\r\n        tableKey: 0\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      // initialization\r\n      initData() {\r\n        let data = helper.getAssetsPatternsPickerData(this.$store)\r\n        if (data) {\r\n          this.timeframe = data.timeframe\r\n          this.patternsUrl = helper.getPatternLabHistoryUrl(data.selectedAssets, data.checkedPatterns, this.timeframe)\r\n          this.tableKey++ // force reload of fancy-table component\r\n\r\n          this.initPieCharts()\r\n        }        \r\n      },\r\n      initPieCharts(column=null, filter=null) {\r\n        if (this.patternsUrl) {\r\n          let datas = []          \r\n          this.$http\r\n          .get(this.patternsUrl)\r\n          .then(response => response.data.forEach(datum => {\r\n              if (datum.count && (!column || (column && String(this.getColumnValue(column, datum)).toLowerCase().includes(filter.toLowerCase())))) {\r\n                datas.push(datum)\r\n              }\r\n          }))\r\n          .catch(error => {\r\n            console.log(error)\r\n            if (error.message === constants.strings.networkError) {\r\n              helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', this.$t('notifications.beConnectionLost') + '(' + this.$t('sidebar.patternLab') + ' ' + this.$t(this.storeKey + '.title') + ')')\r\n            }\r\n          })\r\n          .finally(() => {\r\n            this.assets = []\r\n            this.patterns = []\r\n            this.patternsStats = {  // doing it in finally because of emmited events based concurrency\r\n              total: 0,\r\n              bullish: 0,\r\n              bearish: 0\r\n            }\r\n            this.patternsByAsset = {} \r\n            this.assetsByPattern = {} \r\n\r\n            datas.forEach(datum => {\r\n              this.updateAssetsPatterns(datum)\r\n              this.updatePatternsStats(this.getDirection(datum.signal_set), datum.count)\r\n              this.updateChartDatas(datum)\r\n            }) \r\n            this.initSelectedAssetPattern()     \r\n\r\n            // creating pie charts data\r\n            this.createChartDatas()\r\n            // force reload of fancy-card component\r\n            this.cardKey++\r\n          })\r\n        }\r\n      },\r\n      initSelectedAssetPattern() {\r\n        // setting valid value of selected asset and pattern\r\n        let data = this.$store.getItem(this.storeKey)\r\n\r\n        this.selectedAsset = this.initSelectedItem(this.selectedAsset, this.assets)\r\n        this.selectedPattern = this.initSelectedItem(this.selectedPattern ? this.selectedPattern : data ? data.selectedPattern : null, this.patterns)\r\n      },\r\n      initSelectedItem(selectedCandidate, items) {\r\n        if (selectedCandidate && items.includes(selectedCandidate)) {\r\n          return selectedCandidate\r\n        } else if (items.length) {\r\n          return items[0]\r\n        }        \r\n        return null\r\n      },\r\n\r\n      // emit event\r\n      filtered(data) {\r\n        this.initPieCharts(data.column, data.filter)\r\n      },\r\n\r\n      // table rows creator\r\n      rowsCreator(responseData) { \r\n        let rows = []     \r\n\r\n        responseData.forEach(data => {\r\n          if (data.count) {\r\n            let row = []\r\n            this.createRow(data, row)\r\n            rows.push(row)          \r\n          }\r\n        })\r\n\r\n        return rows\r\n      },\r\n      createRow(data, row) {\r\n        row.push(data.history.ticker.symbol) // Asset\r\n        row.push(data.pattern.name) // Pattern\r\n        row.push(data.count) // # of occurence          \r\n        row.push(data.signal_set.length) // Pattern length\r\n\r\n        let direction = this.getDirection(data.signal_set)       \r\n        row.push(direction) // Direction\r\n\r\n        row.push(data.count_mean ? 1 / data.count_mean : null) // Average frequency\r\n\r\n        if (direction === constants.strings.bullish) {\r\n          row.push(data.d1_bull_up + ' %')  // 1 day up_down\r\n          row.push(data.d5_bull_up + ' %')  // 5 days up_down\r\n          row.push(data.d10_bull_up + ' %') // 10 days up_down\r\n        } else if (direction === constants.strings.bearish) {\r\n          row.push(data.d1_bear_down + ' %')\r\n          row.push(data.d5_bear_down + ' %')\r\n          row.push(data.d10_bear_down + ' %')\r\n        }\r\n      },\r\n      getDirection(signal_set) {\r\n        let directionNr = 0\r\n        signal_set.forEach(signal => directionNr += signal.direction) // to-do: how to calculate overall direction?\r\n\r\n        return helper.convertDirection(directionNr)\r\n      },\r\n\r\n      getColumnValue(column, data) {\r\n        let clNr = 0\r\n\r\n        switch (column) {\r\n          case this.columns[clNr++]:\r\n            return data.history.ticker.symbol // Asset\r\n          case this.columns[clNr++]:\r\n            return data.pattern.name          // Pattern\r\n          case this.columns[clNr++]:\r\n            return data.count                 // # of occurence          \r\n          case this.columns[clNr++]:\r\n            return data.signal_set.length    // Pattern length\r\n          case this.columns[clNr++]:\r\n            let direction = this.getDirection(data.signal_set)       \r\n            return direction                  // Direction\r\n          case this.columns[clNr++]:\r\n            return data.count_mean ? 1 / data.count_mean : null // Average frequency\r\n          case this.columns[clNr++]:\r\n            return direction === constants.strings.bullish ? data.d1_bull_up + ' %' : data.d1_bear_down + ' %'  // 1 day up_down\r\n          case this.columns[clNr++]:\r\n            return direction === constants.strings.bullish ? data.d5_bull_up + ' %' : data.d5_bear_down + ' %'  // 5 days up_down\r\n          case this.columns[clNr++]:\r\n            return direction === constants.strings.bullish ? data.d10_bull_up + ' %' : data.d10_bear_down + ' %'  // 10 days up_down\r\n        }\r\n      },\r\n\r\n      // chart & stats methods\r\n      updateAssetsPatterns(datum) {\r\n        let asset = datum.history.ticker\r\n        if (!this.assets.map(a => a.id).includes(asset.id)) {\r\n          this.assets.push({ id: asset.id, symbol: asset.symbol })\r\n        }\r\n\r\n        let pattern = datum.pattern\r\n        if (!this.patterns.map(p => p.id).includes(pattern.id)) {\r\n          this.patterns.push(pattern)\r\n        }\r\n      },\r\n      updatePatternsStats(direction, count) {\r\n        this.patternsStats.total += count\r\n\r\n        if (direction === constants.strings.bullish) {\r\n          this.patternsStats.bullish += count\r\n        } else if (direction === constants.strings.bearish) {\r\n          this.patternsStats.bearish += count\r\n        }\r\n      },\r\n      updateChartDatas(data) {\r\n        if (!(data.history.ticker.symbol in this.patternsByAsset)) {\r\n          this.patternsByAsset[data.history.ticker.symbol] = {}              \r\n        }\r\n        if (!(data.pattern.name in this.patternsByAsset[data.history.ticker.symbol])) {\r\n          this.patternsByAsset[data.history.ticker.symbol][data.pattern.name] = 0              \r\n        }\r\n        this.patternsByAsset[data.history.ticker.symbol][data.pattern.name] += data.count\r\n\r\n        if (!(data.pattern.name in this.assetsByPattern)) {\r\n          this.assetsByPattern[data.pattern.name] = {}              \r\n        }\r\n        if (!(data.history.ticker.symbol in this.assetsByPattern[data.pattern.name])) {\r\n          this.assetsByPattern[data.pattern.name][data.history.ticker.symbol] = 0              \r\n        }\r\n        this.assetsByPattern[data.pattern.name][data.history.ticker.symbol] += data.count\r\n      },\r\n      createChartDatas() {\r\n        this.chartData.patternsByAsset = this.selectedAsset ? this.createChartData(this.patternsByAsset[this.selectedAsset.symbol]) : null\r\n        this.chartData.assetsByPattern = this.selectedPattern ? this.createChartData(this.assetsByPattern[this.selectedPattern.name]) : null\r\n      },\r\n      createChartData(items) {\r\n        if (items) {\r\n          return {\r\n            datasets: [{\r\n              data: Object.values(items),\r\n              backgroundColor: Object.keys(items).map(_ => \"#\"+((1<<24)*Math.random()|0).toString(16))  // random colors\r\n            }],\r\n            labels: Object.keys(items)\r\n          }\r\n        }\r\n        return null\r\n      },      \r\n\r\n      // dropdowns selections methods\r\n      selectAsset(asset) {\r\n        this.selectedAsset = asset\r\n        this.createChartDatas()\r\n      },\r\n      selectPattern(pattern) {\r\n        this.selectedPattern = pattern\r\n        this.createChartDatas()\r\n      }      \r\n    },\r\n\r\n    watch: {\r\n      selectedAsset(val) {        \r\n        helper.updateStore(this.$store, 'selectedAsset', val, this.storeKey)\r\n      },\r\n      selectedPattern(val) {        \r\n        helper.updateStore(this.$store, 'selectedPattern', val, this.storeKey)\r\n      }\r\n    },\r\n\r\n    mounted() {\r\n      this.initData();\r\n    }\r\n  }  \r\n</script>\r\n<style>\r\n  .table > thead > tr > th {\r\n    font-size: inherit\r\n  }\r\n</style>"]}]}