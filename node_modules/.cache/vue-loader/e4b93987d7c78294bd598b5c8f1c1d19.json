{"remainingRequest":"/home/dufek/Documents/gitlab/frs-apps/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dufek/Documents/gitlab/frs-apps/src/custom/apps/research/patternLab/BacktestPatterns.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dufek/Documents/gitlab/frs-apps/src/custom/apps/research/patternLab/BacktestPatterns.vue","mtime":1593769852986},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dufek/Documents/gitlab/frs-apps/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBc3NldHNQYXR0ZXJuc1BpY2tlciBmcm9tICdAL2N1c3RvbS9jb21wb25lbnRzL0Fzc2V0c1BhdHRlcm5zUGlja2VyJwppbXBvcnQgY29uc3RhbnRzIGZyb20gJ0AvY3VzdG9tL2Fzc2V0cy9qcy9jb25zdGFudHMnCmltcG9ydCBoZWxwZXIgZnJvbSAnQC9jdXN0b20vYXNzZXRzL2pzL2hlbHBlcic7CmltcG9ydCBpMThuIGZyb20gIkAvaTE4biIKCmltcG9ydCBUb3BOYXZiYXIgZnJvbSAiQC9jdXN0b20vbGF5b3V0L2FwcGxpY2F0aW9uL3BhdHRlcm5MYWIvcGVyZm9ybWFuY2VSZXN1bHRzL1RvcE5hdmJhci52dWUiOwppbXBvcnQgRGFzaGJvYXJkQ29udGVudCBmcm9tICJAL2N1c3RvbS9sYXlvdXQvYXBwbGljYXRpb24vcGF0dGVybkxhYi9Db250ZW50LnZ1ZSI7CmltcG9ydCBNb2JpbGVNZW51IGZyb20gIkAvbGF5b3V0L2Rhc2hib2FyZC9Nb2JpbGVNZW51IjsKaW1wb3J0IER1YWxSaW5nTG9hZGVyIGZyb20gJ0BiaXQvam9zaGsudnVlLXNwaW5uZXJzLWNzcy5kdWFsLXJpbmctbG9hZGVyJzsKCgpjb25zdCBkZWZhdWx0U3RyYXRlZ3kgPSB7CiAgaW5pdGlhbENhcGl0YWw6IG51bGwsCgogIC8vIGVudHJ5IHJ1bGVzCiAgdHJlbmRGaWx0ZXI6IGZhbHNlLAogIG1hX2ZpbHRlcl9wZXJpb2Q6IG51bGwsCiAgZml4ZWRfYW1vdW50OiBudWxsLAogIAogIC8vIGV4aXQgcnVsZXMKICBhbmFseXplOiBudWxsLAogIHByb2ZpdF90YWtlOiB7CiAgICB2YWx1ZTogbnVsbCwKICAgIHVuaXQ6IGNvbnN0YW50cy5kZWZhdWx0VW5pdAogIH0sCiAgc3RvcGxvc3M6IHsKICAgIHZhbHVlOiBudWxsLAogICAgdW5pdDogY29uc3RhbnRzLmRlZmF1bHRVbml0CiAgfQp9CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQXNzZXRzUGF0dGVybnNQaWNrZXIsCiAgICBUb3BOYXZiYXIsCiAgICBEYXNoYm9hcmRDb250ZW50LAogICAgTW9iaWxlTWVudSwKICAgIER1YWxSaW5nTG9hZGVyCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yVGl0bGU6ICcgKCcgKyB0aGlzLiR0KCdyZXNlYXJjaC5wYXR0ZXJuTGFiLmJhY2t0ZXN0UGF0dGVybnMudGl0bGUnKSArICcpLicsCiAgICAgIGNvbHVtbnM6IHRoaXMuJHQoY29uc3RhbnRzLnRyYW5zbGF0aW9uS2V5cy5wYXR0ZXJucyArICcuY29sdW1ucycpLAoKICAgICAgc3RyYXRlZ3k6IHsKICAgICAgICAuLi5kZWZhdWx0U3RyYXRlZ3ksCiAgICAgICAgZGlyZWN0aW9uOiBPYmplY3QudmFsdWVzKHRoaXMuJHQoJ3Jlc2VhcmNoLnBhdHRlcm5MYWIuYmFja3Rlc3RQYXR0ZXJucy5lbnRyeVJ1bGVzLmRpcmVjdGlvbnMnKSlbMF0KICAgICAgfSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGNhcmRLZXk6IDAsCgogICAgICAvLyBjc3MgY2xhc3NlcwogICAgICBkYXRhQ2xhc3M6ICdkYXRhJywgICAgICAKICAgICAgbm9EYXRhQ2xhc3M6ICdub0RhdGEnLAogICAgICBsb2FkZXJDbGFzczogJ2xvYWRlcicsCiAgICB9CiAgfSwKICAKICBtZXRob2RzOiB7CiAgICBpbml0RGF0YSgpIHsKICAgICAgbGV0IGRhdGEgPSB0aGlzLiRzdG9yZS5nZXRJdGVtKGNvbnN0YW50cy5zdG9yZUtleXMuYmFja3Rlc3RQYXR0ZXJucykKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBkYXRhLmxvYWRpbmcgPyBkYXRhLmxvYWRpbmcgOiBmYWxzZQogICAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHsKICAgICAgICAgIHRoaXMuc2V0Q2hlY2tCYWNrdGVzdHNJbnRlcnZhbCgpCiAgICAgICAgfQoKICAgICAgICBpZiAoZGF0YS5zdHJhdGVneSkgewogICAgICAgICAgdGhpcy5zdHJhdGVneSA9IGRhdGEuc3RyYXRlZ3kKICAgICAgICAgIHRoaXMuc3RyYXRlZ3kuZGlyZWN0aW9uID0gT2JqZWN0LnZhbHVlcyh0aGlzLiR0KCdyZXNlYXJjaC5wYXR0ZXJuTGFiLmJhY2t0ZXN0UGF0dGVybnMuZW50cnlSdWxlcy5kaXJlY3Rpb25zJykpW2RhdGEuc3RyYXRlZ3kuZGlyZWN0aW9uXQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gewogICAgICAgICAgICAuLi5kZWZhdWx0U3RyYXRlZ3ksCiAgICAgICAgICAgIGRpcmVjdGlvbjogT2JqZWN0LnZhbHVlcyh0aGlzLiR0KCdyZXNlYXJjaC5wYXR0ZXJuTGFiLmJhY2t0ZXN0UGF0dGVybnMuZW50cnlSdWxlcy5kaXJlY3Rpb25zJykpWzBdCiAgICAgICAgICB9ICAgICAgICAgICAgCiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIHNldENoZWNrQmFja3Rlc3RzSW50ZXJ2YWwoKSB7CiAgICAgIGxldCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsgCiAgICAgICAgdGhpcy5jaGVja0JhY2t0ZXN0cyhpbnRlcnZhbCkKICAgICAgfSwgY29uc3RhbnRzLmludGVydmFscy5iYWNrdGVzdHNEb25lICkgICAgICAgIAogICAgfSwKICAgIGNoZWNrQmFja3Rlc3RzKGludGVydmFsKSB7CiAgICAgIGxldCBiYWNrdGVzdHNEb25lID0gdHJ1ZQogICAgICBsZXQgbm9SZXNwID0gdHJ1ZQoKICAgICAgdGhpcy4kaHR0cAogICAgICAuZ2V0KGNvbnN0YW50cy51cmxzLnBhdHRlcm5MYWIuYmFja3Rlc3RQYXR0ZXJucy5zdGF0dXMpCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goYnQgPT4gewogICAgICAgICAgbm9SZXNwID0gZmFsc2UKICAgICAgICAgIGlmICghYnQuZG9uZSkgewogICAgICAgICAgICBiYWNrdGVzdHNEb25lID0gZmFsc2UKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9KQogICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKCiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09IGNvbnN0YW50cy5zdHJpbmdzLm5ldHdvcmtFcnJvcikgewogICAgICAgICAgaGVscGVyLm5vdGlmeUF1ZGlvKHRoaXMsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25uZWN0aW9uTG9zdCcpLCAnZGFuZ2VyJywgdGhpcy5lcnJvclRpdGxlKQogICAgICAgIH0KICAgICAgfSkKICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgIGlmIChiYWNrdGVzdHNEb25lICYmICFub1Jlc3ApIHsKICAgICAgICAgICAgbGV0IGJwRGF0YSA9IHRoaXMuJHN0b3JlLmdldEl0ZW0oY29uc3RhbnRzLnN0b3JlS2V5cy5iYWNrdGVzdFBhdHRlcm5zKQogICAgICAgICAgICBpZiAoYnBEYXRhKSB7CiAgICAgICAgICAgICAgLy8gc2V0IGJ0IGlkIGFuZCBuYW1lCiAgICAgICAgICAgICAgbGV0IGJ0cyA9IGhlbHBlci5nZXRTdG9yZWRCYWNrdGVzdHMoYnBEYXRhKQoKICAgICAgICAgICAgICB0aGlzLiRodHRwCiAgICAgICAgICAgICAgLmdldChjb25zdGFudHMudXJscy5wYXR0ZXJuTGFiLmJhY2t0ZXN0UGF0dGVybnMucmVzdWx0cykKICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICBidHMuZm9yRWFjaChidCA9PiB7ICAgLy8gd2UgaGF2ZSBpZHMgc28gY2hhbmdlIGJhY2t0ZXN0cyBuYW1lcyB0byAnYnRfbmFtZSAoYnRfaWQpJyBmb3JtCiAgICAgICAgICAgICAgICAgIGJ0LnNldCgnYnRJZCcsIHJlc3BvbnNlLmRhdGEuZmlsdGVyKGRhdHVtID0+IGRhdHVtLnRpY2tlciA9PT0gYnQuZ2V0KCdhc3NldElkJykgJiYgZGF0dW0ucGF0dGVybiA9PT0gYnQuZ2V0KCdwYXR0ZXJuSWQnKSlbMF0uaWQpCiAgICAgICAgICAgICAgICAgIGJ0LnNldCh0aGlzLmNvbHVtbnNbMF0udG9Mb3dlckNhc2UoKSwgYCR7YnQuZ2V0KHRoaXMuY29sdW1uc1swXS50b0xvd2VyQ2FzZSgpKSAmJiAhdGhpcy5pc0RlZmF1bHRQck5hbWUoYnQuZ2V0KHRoaXMuY29sdW1uc1swXS50b0xvd2VyQ2FzZSgpKSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYnQuZ2V0KHRoaXMuY29sdW1uc1swXS50b0xvd2VyQ2FzZSgpKS5zcGxpdCgnICgnKVswXSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBoZWxwZXIuZ2V0RGVmYXVsdFByTmFtZShidC5nZXQoJ2J0SWQnKSl9ICgke2J0LmdldCgnYnRJZCcpfSlgKSAgICAvLyBOYW1lCiAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgIGhlbHBlci51cGRhdGVTdG9yZUJhY2t0ZXN0cyh0aGlzLiRzdG9yZSwgJ2JhY2t0ZXN0cycsIGJ0cywgY29uc3RhbnRzLnN0b3JlS2V5cy5iYWNrdGVzdFBhdHRlcm5zKQogICAgICAgICAgICAgICAgaGVscGVyLnVwZGF0ZVN0b3JlKHRoaXMuJHN0b3JlLCAnYWxsb3dTYXZlJywgdHJ1ZSwgY29uc3RhbnRzLnN0b3JlS2V5cy5iYWNrdGVzdFBhdHRlcm5zKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gY29uc3RhbnRzLnN0cmluZ3MubmV0d29ya0Vycm9yKSB7CiAgICAgICAgICAgICAgICAgIGhlbHBlci5ub3RpZnlBdWRpbyh0aGlzLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdGlvbkxvc3QnKSwgJ2RhbmdlcicsIHRoaXMuZXJyb3JUaXRsZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKQogICAgICAgICAgICAgICAgdGhpcy5jYXJkS2V5KysKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGlzRGVmYXVsdFByTmFtZShuYW1lKSB7CiAgICAgIGxldCBuYW1lU3BsaXR0ZWQgPSBuYW1lLnNwbGl0KCdfJykKICAgICAgaWYgKG5hbWVTcGxpdHRlZC5sZW5ndGggPCAyKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgbGV0IHNwbGl0dGVkID0gbmFtZVNwbGl0dGVkWzFdLnNwbGl0KCcgKCcpCiAgICAgIGlmIChzcGxpdHRlZC5sZW5ndGggPCAyKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgcmV0dXJuIHNwbGl0dGVkWzBdID09PSBzcGxpdHRlZFsxXS5zcGxpdCgnKScpWzBdCiAgICB9LAoKICAgIC8vIG1ldGhvZHMgZnJvbSBBc3NldHNQYXR0ZXJuc1BpY2tlciBlbWl0cwogICAgYWRkUGF0dGVybigpIHsKICAgICAgaWYgKCF0aGlzLnN0cmF0ZWd5LmluaXRpYWxDYXBpdGFsKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLCAKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnbm90aWZpY2F0aW9ucy5ub0luaXRpYWxDYXBpdGFsJykgKyB0aGlzLmVycm9yVGl0bGUKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CgogICAgICBpZiAodGhpcy5sb2FkaW5nKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLCAKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnbm90aWZpY2F0aW9ucy5sb2FkaW5nJykgKyB0aGlzLmVycm9yVGl0bGUKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CgogICAgICBsZXQgZGF0YSA9IGhlbHBlci5nZXRBc3NldHNQYXR0ZXJuc1BpY2tlckRhdGEodGhpcy4kc3RvcmUpCiAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5jaGVja2VkUGF0dGVybnMubGVuZ3RoKSB7ICAgCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KCiAgICAgIHRoaXMuc2V0QmFja3Rlc3RzVGFibGUodHJ1ZSkKCiAgICAgIGhlbHBlci51cGRhdGVTdG9yZSh0aGlzLiRzdG9yZSwgJ3NhdmVkQmFja3Rlc3RzSURzJywgW10sIGNvbnN0YW50cy5zdG9yZUtleXMuYmFja3Rlc3RQYXR0ZXJucykKICAgICAgaGVscGVyLnVwZGF0ZVN0b3JlKHRoaXMuJHN0b3JlLCAndW5zYXZlZEJhY2t0ZXN0c0lEcycsIFtdLCBjb25zdGFudHMuc3RvcmVLZXlzLmJhY2t0ZXN0UGF0dGVybnMpCiAgICAgIGhlbHBlci51cGRhdGVTdG9yZSh0aGlzLiRzdG9yZSwgJ2FsbG93U2F2ZScsIGZhbHNlLCBjb25zdGFudHMuc3RvcmVLZXlzLmJhY2t0ZXN0UGF0dGVybnMpCgogICAgICB0aGlzLmNhcmRLZXkrKwoKICAgICAgcmV0dXJuIHRydWUKICAgIH0sCgogICAgcnVuU3RyYXRlZ3lDbGljaygpIHsKICAgICAgbGV0IGRhdGEgPSBoZWxwZXIuZ2V0QXNzZXRzUGF0dGVybnNQaWNrZXJEYXRhKHRoaXMuJHN0b3JlKQogICAgICBpZiAoIWRhdGEgfHwgIWRhdGEuY2hlY2tlZEFzc2V0cy5sZW5ndGgpIHsgICAKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsIAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdub3RpZmljYXRpb25zLmFkZE5vQXNzZXQnKSArIHRoaXMuZXJyb3JUaXRsZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgCiAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsIAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdub3RpZmljYXRpb25zLmxvYWRpbmcnKSArIHRoaXMuZXJyb3JUaXRsZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgcmV0dXJuIAogICAgICB9CgogICAgICBpZiAoZGF0YSAmJiAhZGF0YS5jaGVja2VkUGF0dGVybnMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLCAKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnbm90aWZpY2F0aW9ucy5hZGROb1BhdHRlcm4nKSArIHRoaXMuZXJyb3JUaXRsZQogICAgICAgIH0pICAKICAgICAgICByZXR1cm4KICAgICAgfSAKCiAgICAgIGxldCBjYW5SdW4gPSB0cnVlCiAgICAgIGxldCBidHNEYXRhID0gdGhpcy4kc3RvcmUuZ2V0SXRlbShjb25zdGFudHMuc3RvcmVLZXlzLmJhY2t0ZXN0UGF0dGVybnMpCiAgICAgIGlmICghYnRzRGF0YSB8fCAoYnRzRGF0YSAmJiAoYnRzRGF0YS5iYWNrdGVzdHMgPT09IHVuZGVmaW5lZCB8fCBidHNEYXRhLmJhY2t0ZXN0cyA9PT0gW10pKSkgewogICAgICAgIGNhblJ1biA9IHRoaXMuYWRkUGF0dGVybigpCiAgICAgIH0gCgogICAgICBpZiAoY2FuUnVuKSB7ICAgICAgICAKICAgICAgICB0aGlzLnNldEJhY2t0ZXN0c1RhYmxlKCkKICAgICAgICB0aGlzLmNhcmRLZXkrKwogICAgICAgIHRoaXMucnVuQmFja3Rlc3RzKCkgICAgIAogICAgICB9CiAgICB9LAoKICAgIHNldEJhY2t0ZXN0c1RhYmxlKGNyZWF0ZU5ldz1mYWxzZSkgewogICAgICBsZXQgYXNzZXRzUGF0dGVybnMgPSBoZWxwZXIuZ2V0QXNzZXRzUGF0dGVybnNQaWNrZXJEYXRhKHRoaXMuJHN0b3JlKQogICAgICBsZXQgYnBEYXRhID0gdGhpcy4kc3RvcmUuZ2V0SXRlbShjb25zdGFudHMuc3RvcmVLZXlzLmJhY2t0ZXN0UGF0dGVybnMpCiAgICAgIGxldCBvbGRUYWJsZURhdGEgPSBbXQogICAgICBpZiAoYnBEYXRhKSB7CiAgICAgICAgICBvbGRUYWJsZURhdGEgPSBoZWxwZXIuZ2V0U3RvcmVkQmFja3Rlc3RzKGJwRGF0YSkKICAgICAgfQogICAgICBsZXQgbmV3VGFibGVEYXRhID0gb2xkVGFibGVEYXRhCgogICAgICBpZiAoY3JlYXRlTmV3KSB7CiAgICAgICAgaWYgKGFzc2V0c1BhdHRlcm5zKSB7CiAgICAgICAgICAvLyBjcmVhdGUgbmV3IHJvd3MKICAgICAgICAgIG5ld1RhYmxlRGF0YSA9IFtdCgogICAgICAgICAgYXNzZXRzUGF0dGVybnMuY2hlY2tlZEFzc2V0cy5mb3JFYWNoKGFzc2V0ID0+IHsKICAgICAgICAgICAgICBhc3NldHNQYXR0ZXJucy5jaGVja2VkUGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHsKICAgICAgICAgICAgICAgICAgbGV0IHJvdyA9IG5ldyBNYXAoKSAgICAgLy8gb3JkZXIgb2YgcHJvcGVydGllcyBpcyBndWFyYW50ZWVkIHNvIHdlIGNhbiBzdG9yZSBvbmx5IChsYW5ndWFnZSBpbmRlcGVuZGVudCkgdmFsdWVzCiAgICAgICAgICAgICAgICAgIGxldCBjbE5yID0gMAoKICAgICAgICAgICAgICAgICAgcm93LnNldCgnYnRJZCcsIC0xKQogICAgICAgICAgICAgICAgICByb3cuc2V0KCdhc3NldElkJywgYXNzZXQuaWQpCiAgICAgICAgICAgICAgICAgIHJvdy5zZXQoJ3BhdHRlcm5JZCcsIHBhdHRlcm4uaWQpCiAgICAgICAgICAgICAgICAgIHJvdy5zZXQodGhpcy5jb2x1bW5zW2NsTnIrK10udG9Mb3dlckNhc2UoKSwgbnVsbCkgICAgLy8gTmFtZQogICAgICAgICAgICAgICAgICByb3cuc2V0KHRoaXMuY29sdW1uc1tjbE5yKytdLnRvTG93ZXJDYXNlKCksIGFzc2V0c1BhdHRlcm5zLnJhbmdlICYmIGFzc2V0c1BhdHRlcm5zLnJhbmdlLmZyb20gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBoZWxwZXIuZm9ybWF0RGF0ZShoZWxwZXIuZm9ybWF0RGF0ZU9ubHkoYXNzZXRzUGF0dGVybnMucmFuZ2UuZnJvbSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsKSAgICAvLyBGcm9tCiAgICAgICAgICAgICAgICAgIHJvdy5zZXQodGhpcy5jb2x1bW5zW2NsTnIrK10udG9Mb3dlckNhc2UoKSwgYXNzZXRzUGF0dGVybnMucmFuZ2UgJiYgYXNzZXRzUGF0dGVybnMucmFuZ2UudG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGhlbHBlci5mb3JtYXREYXRlKGhlbHBlci5mb3JtYXREYXRlT25seShhc3NldHNQYXR0ZXJucy5yYW5nZS50bykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsKSAgICAvLyBUbwogICAgICAgICAgICAgICAgICByb3cuc2V0KHRoaXMuY29sdW1uc1tjbE5yKytdLnRvTG93ZXJDYXNlKCksIGFzc2V0c1BhdHRlcm5zLnRpbWVmcmFtZSkgICAgLy8gVGltZSBmcmFtZSAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIHJvdy5zZXQodGhpcy5jb2x1bW5zW2NsTnIrK10udG9Mb3dlckNhc2UoKSwgYXNzZXQuc3ltYm9sKSAgICAvLyBBc3NldCAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIHJvdy5zZXQodGhpcy5jb2x1bW5zW2NsTnIrK10udG9Mb3dlckNhc2UoKSwgcGF0dGVybi5uYW1lKSAgICAvLyBQYXR0ZXJuCgogICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdHJhdGVneSkgeyAgIAogICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3cocm93LCBjbE5yKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgbmV3VGFibGVEYXRhLnB1c2gocm93KQogICAgICAgICAgICAgIH0pCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5ld1RhYmxlRGF0YS5mb3JFYWNoKHJvdyA9PiB7CiAgICAgICAgICAgICAgbGV0IGNsTnIgPSA0ICAgIC8vIHN0YXJ0aW5nIGZyb20gQXNzZXQgY29sdW1uIChmb3IgdGhlIGlmKQoKICAgICAgICAgICAgICBpZiAoYXNzZXRzUGF0dGVybnMucmFuZ2UgJiYgIWFzc2V0c1BhdHRlcm5zLnJhbmdlLnRvKSB7CiAgICAgICAgICAgICAgICAgIC8vIHNldCBudWxsIFRvIGRhdGVzIHRvIHRvZGF5CiAgICAgICAgICAgICAgICAgIHJvdy5zZXQodGhpcy5jb2x1bW5zW2NsTnItMl0udG9Mb3dlckNhc2UoKSwgaGVscGVyLmZvcm1hdERhdGUobmV3IERhdGUoKSkpIC8vIFRvCiAgICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgfQoKICAgICAgaGVscGVyLnVwZGF0ZVN0b3JlQmFja3Rlc3RzKHRoaXMuJHN0b3JlLCAnYmFja3Rlc3RzJywgbmV3VGFibGVEYXRhLCBjb25zdGFudHMuc3RvcmVLZXlzLmJhY2t0ZXN0UGF0dGVybnMpIAogICAgfSwKICAgIHVwZGF0ZVJvdyhyb3csIGNsTnIpIHsKICAgICAgcm93LnNldCh0aGlzLmNvbHVtbnNbY2xOcisrXS50b0xvd2VyQ2FzZSgpLCB0aGlzLnN0cmF0ZWd5LmluaXRpYWxDYXBpdGFsID8gYCR7dGhpcy5zdHJhdGVneS5pbml0aWFsQ2FwaXRhbH0gJHtjb25zdGFudHMuZGVmYXVsdFVuaXR9YCA6IG51bGwpICAgIC8vIEluaXRpYWwgY2FwaXRhbAogICAgICByb3cuc2V0KHRoaXMuY29sdW1uc1tjbE5yKytdLnRvTG93ZXJDYXNlKCksIHRoaXMuc3RyYXRlZ3kuYW5hbHl6ZSA/IGAke3RoaXMuc3RyYXRlZ3kuYW5hbHl6ZX0gJHtoZWxwZXIucGx1cmFsaXplKHRoaXMuc3RyYXRlZ3kuYW5hbHl6ZSwgY29uc3RhbnRzLnRyYW5zbGF0aW9uS2V5cy5wYXR0ZXJucyArICcuYmFyJyl9YCA6IG51bGwpICAgIC8vIEFuYWx5emUKICAgICAgcm93LnNldCh0aGlzLmNvbHVtbnNbY2xOcisrXS50b0xvd2VyQ2FzZSgpLCB0aGlzLnN0cmF0ZWd5LnByb2ZpdF90YWtlLnZhbHVlID8gYCR7dGhpcy5zdHJhdGVneS5wcm9maXRfdGFrZS52YWx1ZX0gJHt0aGlzLnN0cmF0ZWd5LnByb2ZpdF90YWtlLnVuaXR9YCA6IG51bGwpICAgIC8vIFByb2ZpdCBUYXJnZXQKICAgICAgcm93LnNldCh0aGlzLmNvbHVtbnNbY2xOcisrXS50b0xvd2VyQ2FzZSgpLCB0aGlzLnN0cmF0ZWd5LnN0b3Bsb3NzLnZhbHVlID8gYCR7dGhpcy5zdHJhdGVneS5zdG9wbG9zcy52YWx1ZX0gJHt0aGlzLnN0cmF0ZWd5LnN0b3Bsb3NzLnVuaXR9YCA6IG51bGwpICAgIC8vIFN0b3AgTG9zcwogICAgICByb3cuc2V0KHRoaXMuY29sdW1uc1tjbE5yKytdLnRvTG93ZXJDYXNlKCksIHRoaXMuc3RyYXRlZ3kudHJlbmRGaWx0ZXIgJiYgdGhpcy5zdHJhdGVneS5tYV9maWx0ZXJfcGVyaW9kID8gYCR7dGhpcy5zdHJhdGVneS5tYV9maWx0ZXJfcGVyaW9kfSAke2NvbnN0YW50cy5kZWZhdWx0VW5pdH1gIDogbnVsbCkgICAgLy8gVHJlbmQgZmlsdGVyIChtb3ZpbmcgYXZlcmFnZSkKICAgICAgcm93LnNldCh0aGlzLmNvbHVtbnNbY2xOcisrXS50b0xvd2VyQ2FzZSgpLCB0aGlzLnN0cmF0ZWd5LmRpcmVjdGlvbikgICAgLy8gRGlyZWN0aW9uCiAgICAgIHJvdy5zZXQoJ2ZpeGVkX2Ftb3VudCcsIHRoaXMuc3RyYXRlZ3kuZml4ZWRfYW1vdW50KSAgICAvLyBSaXNrCiAgICB9LAoKICAgIHJ1bkJhY2t0ZXN0cygpIHsgCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgbGV0IGJhY2t0ZXN0c0FsbCA9IGhlbHBlci5nZXRTdG9yZWRCYWNrdGVzdHModGhpcy4kc3RvcmUuZ2V0SXRlbShjb25zdGFudHMuc3RvcmVLZXlzLmJhY2t0ZXN0UGF0dGVybnMpKQoKICAgICAgLy8gcnVuIGFsbCBiYWNrdGVzdHMgc2hvd2VkIGluIFBhdHRlcm5zIHRhYmxlCiAgICAgIGxldCBiYWNrdGVzdHMyUnVuID0gW10KICAgICAgYmFja3Rlc3RzQWxsLmZvckVhY2goYnQgPT4gYmFja3Rlc3RzMlJ1bi5wdXNoKGhlbHBlci5tYXBTdHJhdGVneUZyb21Sb3coYnQpKSkKCiAgICAgIHRoaXMuJGh0dHAKICAgICAgLnBvc3QoY29uc3RhbnRzLnVybHMucGF0dGVybkxhYi5iYWNrdGVzdFBhdHRlcm5zLnJlc3VsdHMsIGJhY2t0ZXN0czJSdW4pCiAgICAgIC50aGVuKF8gPT4gdGhpcy5zZXRDaGVja0JhY2t0ZXN0c0ludGVydmFsKCkpCiAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CgogICAgICAgIGlmIChlcnJvci5tZXNzYWdlID09PSBjb25zdGFudHMuc3RyaW5ncy5uZXR3b3JrRXJyb3IpIHsKICAgICAgICAgIGhlbHBlci5ub3RpZnlBdWRpbyh0aGlzLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdGlvbkxvc3QnKSwgJ2RhbmdlcicsIHRoaXMuZXJyb3JUaXRsZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLCAKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnbm90aWZpY2F0aW9ucy5jb3VsZG50UnVuQmFja3Rlc3RzJykgKyB0aGlzLmVycm9yVGl0bGUKICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KSAgICAgICAgCiAgICB9LAoKICAgIHRvZ2dsZVNpZGViYXIoKSB7CiAgICAgIGlmICh0aGlzLiRzaWRlYmFyLnNob3dTaWRlYmFyKSB7CiAgICAgICAgdGhpcy4kc2lkZWJhci5kaXNwbGF5U2lkZWJhcihmYWxzZSk7CiAgICAgIH0KICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0RGF0YSgpICAgICAKICAgIHRoaXMuY2FyZEtleSsrCiAgfSwKCiAgd2F0Y2g6IHsKICAgIGxvYWRpbmcodmFsKSB7CiAgICAgIGhlbHBlci51cGRhdGVTdG9yZSh0aGlzLiRzdG9yZSwgJ2xvYWRpbmcnLCB2YWwsIGNvbnN0YW50cy5zdG9yZUtleXMuYmFja3Rlc3RQYXR0ZXJucykgCiAgICB9LAogICAgc3RyYXRlZ3k6IHsKICAgICAgaGFuZGxlcih2YWwpewogICAgICAgIGxldCB2YWwyc3RvcmUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbCkpCiAgICAgICAgdmFsMnN0b3JlLmRpcmVjdGlvbiA9IE9iamVjdC52YWx1ZXModGhpcy4kdCgncmVzZWFyY2gucGF0dGVybkxhYi5iYWNrdGVzdFBhdHRlcm5zLmVudHJ5UnVsZXMuZGlyZWN0aW9ucycpKS5pbmRleE9mKHZhbC5kaXJlY3Rpb24pCiAgICAgICAgaGVscGVyLnVwZGF0ZVN0b3JlKHRoaXMuJHN0b3JlLCAnc3RyYXRlZ3knLCB2YWwyc3RvcmUsIGNvbnN0YW50cy5zdG9yZUtleXMuYmFja3Rlc3RQYXR0ZXJucykgCiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9Cn0gIAo="},{"version":3,"sources":["BacktestPatterns.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BacktestPatterns.vue","sourceRoot":"src/custom/apps/research/patternLab","sourcesContent":["<template>\r\n  <div class=\"row\">\r\n\r\n    <div class=\"col-xl-12 col-12 col-md-6 container\">\r\n      <assets-patterns-picker :title=\"$t('research.patternLab.backtestPatterns.title')\"\r\n                              :btnText=\"$t('research.patternLab.backtestPatterns.addPattern')\" \r\n                              @btnClicked=\"addPattern\" />\r\n    </div>\r\n\r\n    <!-- strategy settings  -->\r\n    <div class=\"col-md-6 container col-12 col-xl-3\" style=\"margin-left: 0px\">\r\n      <card>\r\n        <!-- initial capital -->\r\n        <div>\r\n          <p class=\"label\">{{ $t('research.patternLab.backtestPatterns.initialCapital') }}</p>\r\n          <base-input alternative\r\n                      type=\"text\"\r\n                      class=\"input\"\r\n                      style=\"\"\r\n                      v-model=\"strategy.initialCapital\"\r\n                      :placeholder=\"$t('research.patternLab.backtestPatterns.numberUSD')\">\r\n          </base-input>\r\n        </div>    \r\n\r\n        <!-- entry rules -->\r\n        <div style=\"clear:both;\">\r\n          <h4 slot=\"header\" class=\"card-title\">{{ $t('research.patternLab.entry') + ' ' + $t('research.patternLab.rules') }}</h4>        \r\n\r\n          <table>\r\n            <!-- direction -->\r\n            <tr>\r\n              <td>\r\n                <p>{{ $t('research.patternLab.backtestPatterns.entryRules.direction') }}</p>\r\n              </td>\r\n              <td>\r\n                <base-dropdown menu-classes=\"dropdown-black\" \r\n                              title-classes=\"btn btn-secondary\"\r\n                              :title=\"strategy.direction\">\r\n                  <ul style=\"list-style-type: none;\">\r\n                    <li v-for=\"dir in Object.values($t('research.patternLab.backtestPatterns.entryRules.directions')).filter(d => d !== strategy.direction)\">            \r\n                      <a class=\"dropdown-item\" \r\n                        @click=\"strategy.direction = dir\" \r\n                        href=\"#\">\r\n                        {{ dir }}\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                </base-dropdown>\r\n              </td>\r\n            </tr>\r\n\r\n            <!-- trend filter -->\r\n            <tr :title=\"$t('research.patternLab.backtestPatterns.entryRules.trendFilterTip')\">\r\n              <td style=\"width: 46%\">\r\n                <p>{{ $t('research.patternLab.backtestPatterns.entryRules.trendFilter') }}</p>\r\n              </td>\r\n              <td>\r\n                <base-checkbox v-model=\"strategy.trendFilter\" style=\"margin-top: -20px; margin-bottom: 10px; text-align: center;\" />\r\n              </td>\r\n            </tr>\r\n\r\n            <!-- moving average -->\r\n            <tr v-if=\"strategy.trendFilter\" :title=\"$t('research.patternLab.backtestPatterns.entryRules.movingAverageTip')\">\r\n              <td>\r\n                <p>{{ $t('research.patternLab.backtestPatterns.entryRules.ma_filter_period') }}</p>\r\n              </td>\r\n              <td>\r\n                <base-input alternative\r\n                            type=\"text\"\r\n                            v-model=\"strategy.ma_filter_period\"\r\n                            :placeholder=\"$t('research.patternLab.backtestPatterns.numberUSD')\">\r\n                </base-input>\r\n              </td>\r\n            </tr>\r\n            \r\n            <!-- risk (fix-amount) -->\r\n            <tr>\r\n              <td>\r\n                <p>{{ $t('research.patternLab.backtestPatterns.entryRules.fixed_amount') }}</p>\r\n              </td>\r\n              <td>\r\n                <base-input alternative\r\n                        type=\"text\"\r\n                        v-model=\"strategy.fixed_amount\"\r\n                        :placeholder=\"$t('research.patternLab.backtestPatterns.numberUSD')\">\r\n                </base-input>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n          \r\n        </div>\r\n\r\n        <!-- exit rules -->\r\n        <div>\r\n          <h4 slot=\"header\" class=\"card-title\">{{ $t('research.patternLab.exit') + ' ' + $t('research.patternLab.rules') }}</h4>\r\n\r\n          <!-- analyze -->\r\n          <!-- <div :title=\"$t('research.patternLab.backtestPatterns.exitRules.analyzeTip')\">\r\n            <p class=\"label\" style=\"width: 34%\">{{ $t('research.patternLab.backtestPatterns.exitRules.analyze') }}</p>\r\n            <base-input alternative\r\n                        type=\"text\"\r\n                        class=\"input\"\r\n                        style=\"width: 40%\"\r\n                        v-model=\"strategy.analyze\"\r\n                        :placeholder=\"$t('research.patternLab.backtestPatterns.exitRules.numberBars')\">\r\n            </base-input>\r\n          </div> -->\r\n\r\n          <table>\r\n            <!-- profit target -->\r\n            <tr>\r\n              <td colspan=\"2\">\r\n                <p class=\"label\">{{ $t('research.patternLab.backtestPatterns.exitRules.profit_take') }}</p>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>\r\n                <base-input alternative\r\n                          type=\"text\"                        \r\n                          v-model=\"strategy.profit_take.value\"\r\n                          :placeholder=\"$t('number')\">\r\n                </base-input>\r\n              </td>\r\n              <td>\r\n                <base-dropdown menu-classes=\"dropdown-black\" \r\n                            title-classes=\"btn btn-secondary\"\r\n                            :title=\"strategy.profit_take.unit\">\r\n                  <ul style=\"list-style-type: none;\">\r\n                    <li v-for=\"unit in $t('research.patternLab.units').filter(u => u !== strategy.profit_take.unit)\">\r\n                      <a class=\"dropdown-item\" \r\n                        @click=\"strategy.profit_take.unit = unit\" \r\n                        href=\"#\">\r\n                        {{ unit }}\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                </base-dropdown>\r\n              </td>\r\n            </tr>\r\n\r\n            <!-- stop loss -->\r\n            <tr>\r\n              <td colspan=\"2\">\r\n                <p class=\"label\">{{ $t('research.patternLab.backtestPatterns.exitRules.stoploss') }}</p>\r\n              </td>\r\n\r\n            </tr>\r\n            <tr>\r\n              <td>\r\n                <base-input alternative\r\n                          type=\"text\"\r\n                          v-model=\"strategy.stoploss.value\"\r\n                          :placeholder=\"$t('number')\">\r\n                </base-input>\r\n              </td>\r\n              <td>\r\n                <base-dropdown menu-classes=\"dropdown-black\" \r\n                            title-classes=\"btn btn-secondary\"\r\n                            :title=\"strategy.stoploss.unit\">\r\n                  <ul style=\"list-style-type: none;\">\r\n                    <li v-for=\"unit in $t('research.patternLab.units').filter(u => u !== strategy.stoploss.unit)\">\r\n                      <a class=\"dropdown-item\" \r\n                        @click=\"strategy.stoploss.unit = unit\" \r\n                        href=\"#\">\r\n                        {{ unit }}\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                </base-dropdown>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n\r\n        </div>\r\n\r\n        <!-- Run strategy button -->\r\n        <base-button native-type=\"submit\" type=\"secondary\" @click=\"runStrategyClick\" style=\"width: 100%\">{{ $t('research.patternLab.backtestPatterns.runStrategy') }}</base-button>\r\n\r\n      </card>\r\n    </div>\r\n    \r\n    <!-- performance results  -->\r\n    <card class=\"col-xl-8 col-md-12  container \" style=\"margin-right: 0px\" :key=\"cardKey\">\r\n      <h4 slot=\"header\" class=\"card-title\" style=\"float: left\">{{ $t('research.patternLab.backtestPatterns.performanceResults.title') }}</h4>\r\n\r\n      <top-navbar />\r\n      <DualRingLoader v-if=\"loading\" :color=\"'#54f1d2'\" :class=\"[loading ? dataClass : noDataClass, loaderClass]\"/>\r\n      <dashboard-content @click.native=\"toggleSidebar\" style=\"margin-top: 15px\" />\r\n    </card>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\n  import AssetsPatternsPicker from '@/custom/components/AssetsPatternsPicker'\r\n  import constants from '@/custom/assets/js/constants'\r\n  import helper from '@/custom/assets/js/helper';\r\n  import i18n from \"@/i18n\"\r\n  \r\n  import TopNavbar from \"@/custom/layout/application/patternLab/performanceResults/TopNavbar.vue\";\r\n  import DashboardContent from \"@/custom/layout/application/patternLab/Content.vue\";\r\n  import MobileMenu from \"@/layout/dashboard/MobileMenu\";\r\n  import DualRingLoader from '@bit/joshk.vue-spinners-css.dual-ring-loader';\r\n\r\n  \r\n  const defaultStrategy = {\r\n    initialCapital: null,\r\n\r\n    // entry rules\r\n    trendFilter: false,\r\n    ma_filter_period: null,\r\n    fixed_amount: null,\r\n    \r\n    // exit rules\r\n    analyze: null,\r\n    profit_take: {\r\n      value: null,\r\n      unit: constants.defaultUnit\r\n    },\r\n    stoploss: {\r\n      value: null,\r\n      unit: constants.defaultUnit\r\n    }\r\n  }\r\n  \r\n  export default {\r\n    components: {\r\n      AssetsPatternsPicker,\r\n      TopNavbar,\r\n      DashboardContent,\r\n      MobileMenu,\r\n      DualRingLoader\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        errorTitle: ' (' + this.$t('research.patternLab.backtestPatterns.title') + ').',\r\n        columns: this.$t(constants.translationKeys.patterns + '.columns'),\r\n\r\n        strategy: {\r\n          ...defaultStrategy,\r\n          direction: Object.values(this.$t('research.patternLab.backtestPatterns.entryRules.directions'))[0]\r\n        },\r\n        loading: false,\r\n        cardKey: 0,\r\n\r\n        // css classes\r\n        dataClass: 'data',      \r\n        noDataClass: 'noData',\r\n        loaderClass: 'loader',\r\n      }\r\n    },\r\n    \r\n    methods: {\r\n      initData() {\r\n        let data = this.$store.getItem(constants.storeKeys.backtestPatterns)\r\n        if (data) {\r\n          this.loading = data.loading ? data.loading : false\r\n          if (this.loading) {\r\n            this.setCheckBacktestsInterval()\r\n          }\r\n\r\n          if (data.strategy) {\r\n            this.strategy = data.strategy\r\n            this.strategy.direction = Object.values(this.$t('research.patternLab.backtestPatterns.entryRules.directions'))[data.strategy.direction]\r\n          } else {\r\n            this.strategy = {\r\n              ...defaultStrategy,\r\n              direction: Object.values(this.$t('research.patternLab.backtestPatterns.entryRules.directions'))[0]\r\n            }            \r\n          }\r\n        }\r\n      },\r\n\r\n      setCheckBacktestsInterval() {\r\n        let interval = setInterval(() => { \r\n          this.checkBacktests(interval)\r\n        }, constants.intervals.backtestsDone )        \r\n      },\r\n      checkBacktests(interval) {\r\n        let backtestsDone = true\r\n        let noResp = true\r\n\r\n        this.$http\r\n        .get(constants.urls.patternLab.backtestPatterns.status)\r\n        .then(response => {\r\n          response.data.forEach(bt => {\r\n            noResp = false\r\n            if (!bt.done) {\r\n              backtestsDone = false\r\n            }\r\n          })\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n\r\n          if (error.message === constants.strings.networkError) {\r\n            helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', this.errorTitle)\r\n          }\r\n        })\r\n        .finally(() => {\r\n          if (backtestsDone && !noResp) {\r\n              let bpData = this.$store.getItem(constants.storeKeys.backtestPatterns)\r\n              if (bpData) {\r\n                // set bt id and name\r\n                let bts = helper.getStoredBacktests(bpData)\r\n\r\n                this.$http\r\n                .get(constants.urls.patternLab.backtestPatterns.results)\r\n                .then(response => {\r\n                  bts.forEach(bt => {   // we have ids so change backtests names to 'bt_name (bt_id)' form\r\n                    bt.set('btId', response.data.filter(datum => datum.ticker === bt.get('assetId') && datum.pattern === bt.get('patternId'))[0].id)\r\n                    bt.set(this.columns[0].toLowerCase(), `${bt.get(this.columns[0].toLowerCase()) && !this.isDefaultPrName(bt.get(this.columns[0].toLowerCase())) \r\n                                                        ? bt.get(this.columns[0].toLowerCase()).split(' (')[0] \r\n                                                        : helper.getDefaultPrName(bt.get('btId'))} (${bt.get('btId')})`)    // Name\r\n                  })\r\n\r\n                  helper.updateStoreBacktests(this.$store, 'backtests', bts, constants.storeKeys.backtestPatterns)\r\n                  helper.updateStore(this.$store, 'allowSave', true, constants.storeKeys.backtestPatterns)\r\n                })\r\n                .catch(error => {\r\n                  console.log(error);\r\n\r\n                  if (error.message === constants.strings.networkError) {\r\n                    helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', this.errorTitle)\r\n                  }\r\n                })\r\n                .finally(() => {\r\n                  this.loading = false\r\n                  clearInterval(interval)\r\n                  this.cardKey++\r\n                })\r\n              }\r\n          }\r\n        })\r\n      },\r\n      isDefaultPrName(name) {\r\n        let nameSplitted = name.split('_')\r\n        if (nameSplitted.length < 2) {\r\n          return false\r\n        }\r\n        let splitted = nameSplitted[1].split(' (')\r\n        if (splitted.length < 2) {\r\n          return false\r\n        }\r\n        return splitted[0] === splitted[1].split(')')[0]\r\n      },\r\n\r\n      // methods from AssetsPatternsPicker emits\r\n      addPattern() {\r\n        if (!this.strategy.initialCapital) {\r\n          this.$notify({\r\n                          type: 'warning', \r\n                          message: this.$t('notifications.noInitialCapital') + this.errorTitle\r\n                      })\r\n          return false\r\n        }\r\n\r\n        if (this.loading) {\r\n          this.$notify({\r\n                          type: 'warning', \r\n                          message: this.$t('notifications.loading') + this.errorTitle\r\n                      })\r\n          return false\r\n        }\r\n\r\n        let data = helper.getAssetsPatternsPickerData(this.$store)\r\n        if (!data || !data.checkedPatterns.length) {   \r\n          return false\r\n        }\r\n\r\n        this.setBacktestsTable(true)\r\n\r\n        helper.updateStore(this.$store, 'savedBacktestsIDs', [], constants.storeKeys.backtestPatterns)\r\n        helper.updateStore(this.$store, 'unsavedBacktestsIDs', [], constants.storeKeys.backtestPatterns)\r\n        helper.updateStore(this.$store, 'allowSave', false, constants.storeKeys.backtestPatterns)\r\n\r\n        this.cardKey++\r\n\r\n        return true\r\n      },\r\n\r\n      runStrategyClick() {\r\n        let data = helper.getAssetsPatternsPickerData(this.$store)\r\n        if (!data || !data.checkedAssets.length) {   \r\n          this.$notify({\r\n                          type: 'warning', \r\n                          message: this.$t('notifications.addNoAsset') + this.errorTitle\r\n                      })\r\n          return\r\n        }\r\n        \r\n        if (this.loading) {\r\n          this.$notify({\r\n                          type: 'warning', \r\n                          message: this.$t('notifications.loading') + this.errorTitle\r\n                      })\r\n          return \r\n        }\r\n\r\n        if (data && !data.checkedPatterns.length) {\r\n          this.$notify({\r\n              type: 'warning', \r\n              message: this.$t('notifications.addNoPattern') + this.errorTitle\r\n          })  \r\n          return\r\n        } \r\n\r\n        let canRun = true\r\n        let btsData = this.$store.getItem(constants.storeKeys.backtestPatterns)\r\n        if (!btsData || (btsData && (btsData.backtests === undefined || btsData.backtests === []))) {\r\n          canRun = this.addPattern()\r\n        } \r\n\r\n        if (canRun) {        \r\n          this.setBacktestsTable()\r\n          this.cardKey++\r\n          this.runBacktests()     \r\n        }\r\n      },\r\n\r\n      setBacktestsTable(createNew=false) {\r\n        let assetsPatterns = helper.getAssetsPatternsPickerData(this.$store)\r\n        let bpData = this.$store.getItem(constants.storeKeys.backtestPatterns)\r\n        let oldTableData = []\r\n        if (bpData) {\r\n            oldTableData = helper.getStoredBacktests(bpData)\r\n        }\r\n        let newTableData = oldTableData\r\n\r\n        if (createNew) {\r\n          if (assetsPatterns) {\r\n            // create new rows\r\n            newTableData = []\r\n\r\n            assetsPatterns.checkedAssets.forEach(asset => {\r\n                assetsPatterns.checkedPatterns.forEach(pattern => {\r\n                    let row = new Map()     // order of properties is guaranteed so we can store only (language independent) values\r\n                    let clNr = 0\r\n\r\n                    row.set('btId', -1)\r\n                    row.set('assetId', asset.id)\r\n                    row.set('patternId', pattern.id)\r\n                    row.set(this.columns[clNr++].toLowerCase(), null)    // Name\r\n                    row.set(this.columns[clNr++].toLowerCase(), assetsPatterns.range && assetsPatterns.range.from \r\n                                                                ? helper.formatDate(helper.formatDateOnly(assetsPatterns.range.from))\r\n                                                                : null)    // From\r\n                    row.set(this.columns[clNr++].toLowerCase(), assetsPatterns.range && assetsPatterns.range.to\r\n                                                                ? helper.formatDate(helper.formatDateOnly(assetsPatterns.range.to))\r\n                                                                : null)    // To\r\n                    row.set(this.columns[clNr++].toLowerCase(), assetsPatterns.timeframe)    // Time frame                    \r\n                    row.set(this.columns[clNr++].toLowerCase(), asset.symbol)    // Asset                    \r\n                    row.set(this.columns[clNr++].toLowerCase(), pattern.name)    // Pattern\r\n\r\n                    if (this.strategy) {   \r\n                        this.updateRow(row, clNr)                            \r\n                    }                                 \r\n\r\n                    newTableData.push(row)\r\n                })\r\n            })\r\n          }\r\n        } else {\r\n            newTableData.forEach(row => {\r\n                let clNr = 4    // starting from Asset column (for the if)\r\n\r\n                if (assetsPatterns.range && !assetsPatterns.range.to) {\r\n                    // set null To dates to today\r\n                    row.set(this.columns[clNr-2].toLowerCase(), helper.formatDate(new Date())) // To\r\n                }\r\n            })\r\n        }\r\n\r\n        helper.updateStoreBacktests(this.$store, 'backtests', newTableData, constants.storeKeys.backtestPatterns) \r\n      },\r\n      updateRow(row, clNr) {\r\n        row.set(this.columns[clNr++].toLowerCase(), this.strategy.initialCapital ? `${this.strategy.initialCapital} ${constants.defaultUnit}` : null)    // Initial capital\r\n        row.set(this.columns[clNr++].toLowerCase(), this.strategy.analyze ? `${this.strategy.analyze} ${helper.pluralize(this.strategy.analyze, constants.translationKeys.patterns + '.bar')}` : null)    // Analyze\r\n        row.set(this.columns[clNr++].toLowerCase(), this.strategy.profit_take.value ? `${this.strategy.profit_take.value} ${this.strategy.profit_take.unit}` : null)    // Profit Target\r\n        row.set(this.columns[clNr++].toLowerCase(), this.strategy.stoploss.value ? `${this.strategy.stoploss.value} ${this.strategy.stoploss.unit}` : null)    // Stop Loss\r\n        row.set(this.columns[clNr++].toLowerCase(), this.strategy.trendFilter && this.strategy.ma_filter_period ? `${this.strategy.ma_filter_period} ${constants.defaultUnit}` : null)    // Trend filter (moving average)\r\n        row.set(this.columns[clNr++].toLowerCase(), this.strategy.direction)    // Direction\r\n        row.set('fixed_amount', this.strategy.fixed_amount)    // Risk\r\n      },\r\n\r\n      runBacktests() { \r\n        this.loading = true\r\n        let backtestsAll = helper.getStoredBacktests(this.$store.getItem(constants.storeKeys.backtestPatterns))\r\n\r\n        // run all backtests showed in Patterns table\r\n        let backtests2Run = []\r\n        backtestsAll.forEach(bt => backtests2Run.push(helper.mapStrategyFromRow(bt)))\r\n\r\n        this.$http\r\n        .post(constants.urls.patternLab.backtestPatterns.results, backtests2Run)\r\n        .then(_ => this.setCheckBacktestsInterval())\r\n        .catch(error => {\r\n          this.loading = false\r\n          console.log(error);\r\n\r\n          if (error.message === constants.strings.networkError) {\r\n            helper.notifyAudio(this, document.getElementById('connectionLost'), 'danger', this.errorTitle)\r\n          } else {\r\n            this.$notify({\r\n                          type: 'warning', \r\n                          message: this.$t('notifications.couldntRunBacktests') + this.errorTitle\r\n                        })\r\n          }\r\n        })        \r\n      },\r\n\r\n      toggleSidebar() {\r\n        if (this.$sidebar.showSidebar) {\r\n          this.$sidebar.displaySidebar(false);\r\n        }\r\n      }\r\n    },\r\n\r\n    mounted() {\r\n      this.initData()     \r\n      this.cardKey++\r\n    },\r\n\r\n    watch: {\r\n      loading(val) {\r\n        helper.updateStore(this.$store, 'loading', val, constants.storeKeys.backtestPatterns) \r\n      },\r\n      strategy: {\r\n        handler(val){\r\n          let val2store = JSON.parse(JSON.stringify(val))\r\n          val2store.direction = Object.values(this.$t('research.patternLab.backtestPatterns.entryRules.directions')).indexOf(val.direction)\r\n          helper.updateStore(this.$store, 'strategy', val2store, constants.storeKeys.backtestPatterns) \r\n        },\r\n        deep: true\r\n      }\r\n    }\r\n  }  \r\n</script>\r\n<style>\r\n.label {\r\n  float: left;\r\n  width: 40%;\r\n  padding-top: 5px;\r\n}\r\n\r\n.input {\r\n  float: left;\r\n  width: 60%;\r\n}\r\n\r\n.loader {\r\n  width: 80px; \r\n  height: 80px;  \r\n  position: absolute; \r\n}\r\n\r\n.loader.noData {\r\n  top: 20%; \r\n  left: 40%;    \r\n}\r\n\r\n.loader.data {\r\n  top: 40%; \r\n  left: 42.5%;\r\n}\r\n</style>"]}]}